day 1>
first day 15/2/25

-> we create react and node js folder 
-> we go with install process of react by folowing command
"npx create-react-app ."
<!-- node folder -->
-> next go to node folder and write followig cmd to intialize package.json file
"npm init"
create inside that a file with name index.js

->> ro check the index.js inside part is running or not simple go terminal
"node index.js"

to get direct run without and node index.js writing simply go to package.json file make change inside script pacakgename 
"start": "node index.js"

<--node js file includes mostly ann apis to fetch data etc-->

to run on server we take express to use  ,,, so go to express site 
its an node.js backend 
[text](https://expressjs.com/en/starter/installing.html)

after that go to getttin started


<!-- <<terminal work>> -->
npm install express #1

<!-- <after that to create a serve we need to write something like this> -->
const express = require('express')
const app = express()
const port = 3000

app.get('/', (req, res) => {
  res.send('Hello World!')
})

app.listen(port, () => {
  console.log(`Example app listening on port ${port}`)
})

//write or paste inside index.js file
after that run on terminal
"npm start"

<!-- " go to chrome or edge to check write a localhost:3000 " -->

do some changes in code
const express = require('express')
const app = express()
const port = 3000

app.get('/ap', (req, res) => {
  res.send('Hello World! vfhbfh')
})

app.listen(port, () => {
  console.log(`Example app listening on port ${port}`)
})

And run again the server

in node  
npm start //runn by node script 

<!-- Go to react-app folder -->
in react npm start
//run by react script

get known about all files and folder


16/02/25

<!-- Time Of OLx video after 17.05 of long video of sahif-->

<! some error came in betwween running phase of react app -->
so i simple process follow to delete all project and reinstall all by 
 npx create-react-app . same!!


 -> simple devloper says what is componenets so  which use again and again or reuseable...


 -> create a folder of name component , inside that 

 1.Header.jsx
 2.Header.css

 ---and import thmr inside app.js

 and app.js wala part call in in index.js file
<!-- eg:- onst root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

 --> after import a header file and use inside function, need to write code inside header.jsx otherwise blank o/p

now for styling we go chrome or edge to search "box shadow example"

--) go to header and do change to inside header div give classname and change eg following
<!-- eg: <div className="header">
            <h1>Sell & Purchase ONLINE.... in your city</h1>
        </div>

 --> now create a file with name 
 2.Header.css
--} import thrm into header.jsx
<!-- eg: import './Header.css' -->


so some changes in header.csss file like add color,height add side design by coping the code for link which we 

add span tag at header inside second div with classname='mt-3'
so ass simple some change in css of header
<!-- eg:
.header{
    height: 50px;
    /* height of text */

    color: blueviolet;
    /* color of text */

    /* box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px, rgba(0, 0, 0, 0.3) 0px 1px 3px -1px; */

    box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;
    /* for side design */
}
.mt-3{ 
    /* span walaa part  */
    display: inline-block;
    margin-top: 10px;
}

--> next steps is create home page file inside componet folder to create
1.Home.jsx 
so simple import and us eprocess as same oh!!
28.40

--> serach for react router dom for ig header "its is used for mutlipage we use router"
not get the proper code for that so!!

17/02/25
simple what happen we just copy same url as youtube to get the same code 
[text](https://reactrouter.com/6.28.0/start/overview)

okh next go with video at 00.02
<!-- // const root = ReactDOM.createRoot(document.getElementById('root'));
// root.render(
//   <React.StrictMode>
//     <App />
//   </React.StrictMode>
// );

// above part is replaced by below code --> this code which remove fr index.js

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals

so as simple some change done in index.js file and its hits different
ERROR in ./src/index.js 8:0-84
Module not found: Error: Can't resolve 'react-router-dom' in 'C:\Users\Om\OneDrive\Desktop\React\react-appp\src'

webpack compiled with 1 error and 1 warning

following above error is showing to fix terminal need to install react router,we need for raect
3 1 : 2 4 #1
<!-- npm i react-router-dom --> this command for installation of router-dom


<!-- after running -->
what actually happen its create a about page like when we click on about us its return about us page simple!!!

<!-- some error is not slove yrth at midninght so lets sleep for noowwwww -->

after fixing error by npm audit fix --force
we go wth run code flow?

so simple import home components in index.js file and go on!!
and so simple coode of folloowing given!
example:-
import Home from "./components/Home";  // Import the Home component

const router = createBrowserRouter([
  {
    path: "/",
    element: (<Home />),
  },
  {
    path: "about",
    element: <div>About</div>,
  },
]);
<!-- 
so as ouput webapage if we use /about -> so about page will be show !
and if normal '/' used so home page shows as output
ok simple!! -->

17-02-25

so our header components is not showing so just import in home components  and use before h1 tag inside the div.....

simple one use same folder './Header'
if outside the folder '../Header'

<!-- sooo simple get header as above of the home tag -->
we need login in page in header...
so in folder of componenets in Header we create a link tag for login and import its 
eg:--
import { Link } from "react-router-dom";
<!-- on top we import like bove -->
 <Link to="login"> LOGIN</Link>
 <!-- after header div Link -->

 ===> o/p get login link in header simple !!

 simple create a new file with the name login 

 now do changes as give path in index.js file of login and import it..
 and add"/" in header file where we link login page otherwise its render login login again again !!


 next 1 8 0 2 2 5

 <!-- for login and signup we create an api  -->
 go to login file..
 create simple button and two input tag one link tag for login
 create simple button and two input tag one link tag for singup

 register the signup in index.js same as login and home..

 as output  i face anerror soo as soon i try to clear that {} okk!!

 now go to header file crete link before login page to home..
 go index.js and do change "/ after this add home..

 <!-- SHORT KEY TO   drag select all drag tags and alt+ uparrow or down arrow -->

 #1 otiy

 #2 Commencer with node js foler index.js file run on port!!!

 so next tagrt login key and signup key!!

 before that we want a database so we use mongo!!
<!-- database use for save our data in database -->
2 way to use install on local otherwise go with url 
<!-- just small url change whn use in code!1 that we see further -->
as go for installtion we need 718 mb...
and url just singup and started 
following steps...
<!-- 
Use MongoDB with a URL (MongoDB Atlas - Cloud Database)
If you want to use MongoDB without installing locally, you can use MongoDB Atlas (a cloud-based database).

Steps to Use MongoDB Atlas
Go to MongoDB Atlas and sign up.
Create a New Cluster (Choose Free Tier).
Create a Database & User (Set username & password).
Get Connection String
Go to Clusters → Connect → Choose "Connect your application".
Copy the connection URL, which looks like:
sh
Copy
Edit
mongodb+srv://<username>:<password>@cluster0.mongodb.net/<dbname>?retryWrites=true&w=majority
Connect from a Node.js App
Install MongoDB package in your project:
sh
Copy
Edit
npm install mongoose
Use this in your code:
js
Copy
Edit
const mongoose = require('mongoose');

mongoose.connect('mongodb+srv://<username>:<password>@cluster0.mongodb.net/<dbname>?retryWrites=true&w=majority', {
  useNewUrlParser: true,
  useUnifiedTopology: true,
}).then(() => console.log('MongoDB Connected'))
.catch(err => console.log(err)); -->
[text](https://cloud.mongodb.com/v2/67b4da205dcb437f7a5562ec#/setup/personalization)
<!-- complete the setup oo MongoDB On Url siteeeeeee-->

now go to index.js file!!
<!-- 
// we get data frm frontend so we give name as signup
app.post('/signup', (req, res) => {
  const username  = req.body.username;
  const password = req.body.password; 

}) -->
simply the post method takes two thinks
1 url , 2 method(req and response)

so above code work to get usename and paswword and save in database 

<!-- to connect databse we use mongoDB -->
go url side
[text](https://mongoosejs.com/)
T = 3.00
<!-- 
// we get data frm frontend so we give name as signup
// for testing purpose we change in post int get and some username randomly and password randomly
app.get ('/signup', (req, res) => {
// app.post('/signup', (req, res) => {
  const username  = req.body.username;
  const password = req.body.password; 
  // const user = new Users({ username: username, password: password }); // to connect with database and for that we need to import moogness we use pacaKGE OF MOONGOOSE FOR WEBSITEE

  const user = new Users({ username: 'ommom', password: 'pass' });
  user.save().then(() => console.log('User created'));

}) -->

its simople a libary to connect data with databse 

steps: copy first 2 lines and paste it after first lines!!
2: const Users = mongoose.model('Users', { username: String, password: String });
<!-- change as copy after this const Cat = mongoose.model('Cat', { name: String }); -->

3 cpy second last line
<!-- const kitty = new Cat({ name: 'Zildjian' }); changes this into...! -->

const user = new Users({ username: username, password: password });
this cahnge by cpy above code and pastre afer body code!

simply auto complete come automaticallly so no worries!!!
\for testing on browserrr

// for testing purpose we change in post int get and some username randomly and password randomly



after that change locathost to 4000 beacuse 300 used for react

t = 8 3 0
<!-- 
const mongoose = require('mongoose');
mongoose.connect('mongodb://127.0.0.1:27017/test',(err) => {
  if(!err) {
    console.log('connected to mongodb');
  } else {
    console.log('error in connection', err);
  }
}); --> this code commonly used for each api so its define after import and the connect method takes two this a url and api

/-/ for now we are writing code one file only so its not valid or not okh so just further we move so wdivivde into diff diff file each code ookh!!

 <!-- npm i nodemon   // used need if we run server again and again so save and run automicall node okh -->

 some changes in package.json to npm erun dev wala funda
 "start": "node index.js",
    <!-- "dev": "nodemon index.js" -->

so as we bac with 21225

now mongodb setup and singup with continue with googlr and simply steps need to follow
1.mongo cloud (try free)/(create a cluster)
2.some finsh and save method
3.network access
4.go to quick start.(copy username and password) [url connection bas]-finish and close
5.click on connect in  quick start in (click on connect to your application and copy url)
<!-- mongodb+srv://omn2068:<db_password>@cluster0.vr8ns.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0 --> we get this url..

so ccontinue with video...

as we change in url to render dataa in mogodb databse 
<!-- mongoose.connect('mongodb://mongodb+srv://omn2068:vIjvtcrKCuG2wX0J@cluster0.vr8ns.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0',(err) => { -->

ater all setup
run it once.......
so error to solve this we need to remove if condition after url and its lok ike after changes isss..
<!-- mongoose.connect('mongodb://mongodb+srv://omn2068:vIjvtcrKCuG2wX0J@cluster0.vr8ns.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0') -->

next try again to run the file 
<!-- npm run dev -->

so commment some req for userandpass..
bass kam pachis errror faced to typical password 
<!-- solution just terminate acluster free wala and again create it  -->

so after that we are gettting the o/p

simple to check our code data is stor in database of mongo or no not go to cluster and in abovee option slect colllection see

simply waht i did to solve the dtaabse stored problem just type eror in chatgpt and just run the serve and change the ci=ode with chatgpt code and after that we are succesfully created our databae /Lets see with old code 
<!-- go to o/p page and after 4000/signup to msg render in terminal okh... --> so its working 

<!-- 
// const express = require('express');
// const mongoose = require('mongoose');

// const app = express();
// const port = 4000;

// // Middleware to parse JSON
// app.use(express.json());

// // Connect to MongoDB with error handling
// mongoose.connect('mongodb+srv://omssn21:om212006@cluster0.vr8ns.mongodb.net/myDatabase?retryWrites=true&w=majority&appName=Cluster0')
//   .then(() => console.log('MongoDB connected!'))
//   .catch(err => console.error('MongoDB connection error:', err));

// // Define User Model
// const Users = mongoose.model('Users', { username: String, password: String });

// // Root route
// app.get('/', (req, res) => {
//   res.send('Hello World!');
// });

// // Signup route (test mode)
// app.get('/signup', async (req, res) => {
//   try {
//     const user = new Users({ username: 'ommom', password: 'pass' });
//     await user.save();
//     console.log('User created');
//     res.send('User created successfully!');
//   } catch (error) {
//     console.error('Error creating user:', error);
//     res.status(500).send('Internal Server Error');
//   }
// });

// // Start the server
// app.listen(port, () => {
//   console.log(`Example app listening on port ${port}`);
// }); -->


<!-- {"_id":{"$oid":"67b8c9f13232e3bfa9bc3e4d"},"username":"ommom","password":"pass","__v":{"$numberInt":"0"}} - this output we getttt.. in mongodb cloud -->


as w known we don't to do hardcode so we need to take data from user so some changes in node ffolder inside index.js file

<!-- // so simple react folder is for frontend and for backennd node folder -->


<!-- cltr + shift + p = color change   -->


<!-- As  22--2--25 -->

go to node file and index.js change the console wala part after the username and password
like
<!-- 
 const user = new Users({ username: 'ommom', password: 'pass' });
  user.save()
  .then(() => {
    res.send({message : 'User created'})
  })
  .catch(() => {
  res.send({message: 'Error'});  
  });
})   -->

$ so after that sone error i face d a error which i try to solved wit ai
set mongodb url and copy paste in notepad..

$after  that again we start the server to check the usr is created or not now the msg will show on server

$ go and check mongo to ur user data is created...(colloection>cluster)
ok don>>>

% now i thinkk i run it multiple time so ist swill save again agin yes because it was a get api

changes get with post api now the signup page after 4000 port not run.....done........

so post api call in frontend ..

post key and get key api for differnt use get to user created oon node nly and post fro take input from frontend

@-@

# REact page 

come to signup pagge in frontend main partt

so simple what we want to get when we click on signup in fronted thee datr need to be stored in backend so for the we neeed to change in signup code file  by creating a set so simple ...

so for save in state we wnt to create state..

waht is state ?
% state variable local if variable if changs its update but normal variable change not state upadte 

<changes in fieleee>
  % const [username, setUsername] = useState("haaaaaa //so its will show as output a hhaah on place on usrname w give as null"); // we are creating a state


<input type="text" value={username} 
      onChange={(e) => {
        console.log(e.target.value)  // we are getting the value from the input field
      }}/>
for check by inspect we get console what happeing..

so simpply at  27:00 what we did we change it in code by creating const for pass,username using state 
and add after value and onchange 
example:
  % const [username, setUsername] = useState(""); // we are creating a state
  % const [password, setPassword] = useState(""); // we are creating a state   
  % console.log({username , password});  // we are printing the username & password
  %  <input type="text" value={username} 
  %     onChange={(e) => 
  %     setUsername(e.target.value)
  %     }/>
  %     <br />
  %     PASSWORD
  %     <input type="password" value={password} 
  %     onChange={(e) =>
  %     setPassword(e.target.value)
  %     }


% after fina all changes we will paste a code 

import Header from './Header';
import { Link } from "react-router-dom";
import { useState } from "react";
function Signup() {

  const [username, setUsername] = useState(""); // we are creating a state
  const [password, setPassword] = useState(""); // we are creating a state   
  console.log({username , password});  // we are printing the username & password

  return (
    <div>
      <Header />
      <h1>SignUp</h1>
      <br />
      USERNAME
      <input type="text" value={username} 
      onChange={(e) => 
      setUsername(e.target.value)
      }/>
      <br />
      PASSWORD
      <input type="password" value={password} 
      onChange={(e) =>
      setPassword(e.target.value)
      }
      />
      <br />
      <button>SignUP</button>
      <Link to ='/login'><button>Login</button></Link>
    </div>
  );
}   
export default Signup;    


so simply we go from now , when we click on signup it need to go data in backend ... for that we need to coonect with api

for connetion go to react folder by cd command and insatll 

npm i axios:- uses is simple
% % Axios is a popular library for making HTTP requests in JavaScript applications, including React. Here’s why it’s useful:
% 1. Easy to Use,2. Automatic JSON Handling,3. Supports Request & Response Interceptors,4. Error Handling,5. Supports Canceling Requests,6. Automatic Timeout Handling,7. Supports File Uploads
% When to Use Axios?
% ✅ When working with APIs that return JSON data
% ✅ When you need advanced error handling
% ✅ When sending authentication tokens
% ✅ When handling file uploads
% ✅ When making requests from Node.js


after getting info from online 

30.3

we need to work on code in signup page of react 
inn signup button add onclick=({handleApi}) , and import axios 
create const after the const password and console part cut and paste inside const handleapi..

here we stop .... 30.43 v

01:36....am

% 230225

11.44 PM 
as per the book we go in singupp page in frontend
% const handleApi = () => {
%     console.log({username , password});// we are printing the username & password
%     const URL = "http://localhost:3001/signup";
%     const data = {username,password};
%     axios.post(URL,data)
%     .then((res) => {
%       console.log(res);
%     })
%     .catch((err) => {
%       console.log(err);
%     });
  % }

  this changes we made ... froo connect with backend..

  % so as we done we run react to enter and usrname and password on frontend page so after click the usename and password is saved  but error showss.. in inscept console (both frontend and backend are running on differnrt hostt)

  for connect in one we use cors package..
  % search npm cors

  after installation we go index.js file


@-@

# Node js
indexjs
1- as the website code copy paste 

2- after all changes i paste here..

% const express = require('express')
% const cors = require('cors')
% const app = express()


% app.use(cors())

% const port = 4000

% so after each time run it sface erro crashed wala

so after that we go to check  in mongdb our data is store or not so let's cehck it out..

for ruuunig on console only we do changes in 
we write code for req sned after signup and return in terminal only..

after clicking on button signup w get on terminal data 

% app.post ('/signup', (req, res) => {
%   console.log(req.body);
%   return;
run it simpply but undefined data because after click 
not come inside body to pass inside body we use package body-parser

1. install in node folder

or simply scroll down and we can use json code to from simply for futher images its not work..

so all type api request acceppt then cors
and all type of data accept then pass error

% simply cahnges in code..

% so now we can click on frontend sihgnup button then it show data in terminal api return data in terminal by installing cors and boy-parse
Example app listening on port 4000
{ username: 'suniye1@gmail.com', password: '12345678@' }


% const bodyParser = require('body-parser')
% const app = express()
% app.use(bodyParser.json())
% app.use(bodyParser.urlencoded({ extended: false }))
% app.use(cors())

2- % so normally we again make changes in code like remove return and uncomment the request wal part and rmove the pass data with request name (index.js)
 return;
  const user = new Users({ username: 'twetytwo25', password: 'pass' });


% simply waht is its like simple api fro now beacuse in futher we need to create like if user is signup then they cannont signup again


3- run and check its going t data in dtabase (mongodb)
yaaa we are getting ittt...


@-@

# REact page 

go to signup page and do chnge in code..

%  .then((res) => {
%       console.log(res.data);
%       if(res.data.message === 'User created'){
%         alert('User created');
%       }
%     })
%     .catch((err) => {
%       console.log(err);
%       alert('SERVer ERR')
%     });
%   }

///after this change if user created then alert msg come and data will store in backend////

................
% so now its time to go on login page.././././
................

@-@

# Node js
indexjs

1- copy signup api code and paste it again afterrr the signup api code ends
2- do ittttt

% // we get data frm frontend so we give name as login

% app.post ('/login', (req, res) => {
%   console.log(req.body);
%   const username  = req.body.username;
%   const password = req.body.password; 

%   user.findOne({username: username})  

%   .then(() => {
%     res.send({message : 'Find User'})
%   })
%   .catch(() => {
%   res.send({message: 'Server Error'});  
%   });
% })  


@-@

# REact page

1.LoginPage.jsx

2.changs

% import Header from './Header';
% import { Link } from "react-router-dom";
% import { useState } from "react";
% import axios from "axios";

% function Login() {

%   const [username, setUsername] = useState(""); // we are creating a state
%   const [password, setPassword] = useState(""); // we are creating a state

%   const handleApi = () => {
%     console.log({username , password});// we are printing the username & password
%     const URL = "http://localhost:4000/login";
%     const data = {username,password};
%     axios.post(URL,data)
%     .then((res) => {
%       console.log(res.data);
%       if(res.data.message === 'User created'){
%         alert('User created');
%       }
%     })
%     .catch((err) => {
%       console.log(err);
%       alert('SERVer ERR')
%     });
%   }


%   return (
%     <div>
%       <Header />
%       <h1>Login</h1>
%       <br />
%       USERNAME
%       <input type="text" value={username}
%       onChange={(e) =>{
%         setUsername(e.target.value)
%       }}
%       />
%       <br />
%       PASSWORD
%       <input type="password" value={password}
%       onChange={(e) => {
%         setPassword(e.target.value)
%       }}
%       />
%       <br />
%       <button onClick={handleApi}>LOGIN</button>
%       <Link to ='/signup'><button>SIGNUP</button></Link>
%     </div>
%   );
% }   
% export default Login;    



@-@

# Node js
indexjs

changes in code 
.then((result) => {
    console.log(result  ,"userData");
    res.send({message : 'Find User'})
  })


after chanhes we dont get result bouut data we get....
 
55.00 v
240225-01.06


after  🌅☕🌞

so started with an error in connecton with api and some code changes in index.js after that weith the help of ai we solve an run succesfullly working login and signup button

% index.js 

Users.findOne({username: username})


output
% { username: 'omn@gmail.com', password: '1234554321@' }
% {
%   _id: new ObjectId('67bb732576f94ffd80a10421'),
%   username: 'omn@gmail.com',
%   password: '1234554321@',
%   __v: 0
% } userData

.........

% cahnges for usser not found with if condition in code in index.js

in login in inside login in index.js

.then((result) => {
    console.log(result  ,"userData");
    if(!result){
      res.send({message : 'User not found'})
    }


-----------Now go and check for user NOt found and other msg in alter--------------
..............🏃‍♂️

% // simply some sorted out things and run well //

% so if user exists then we give a tokennn for that we neeed to install package 

% wha it is ? its is simple give a number to that user
search 🔍 : - jsonwebtoken
[text]🔗(https://www.npmjs.com/package/jsonwebtoken)

insatll..... in node folder 

@-@

# Node js
index.js

% changes in code by website
jwt.sign({
  data: 'foobar'
}, 'secret', { expiresIn: 60 * 60 });


% index.js

const jwt = require('jsonwebtoken');


@-@

# REact page

/*
then((res) => {
      console.log(res.data);
      if(res.data.message === 'User created'){
        if(res.data.token){ 
          localStorage.setItem('token', res.data.token);
          alert('Login Successful');
        }
        alert('User created');
      }
*/

% changes in code.... in login.jsx


% 🧠💥 two type of api secure and unsecure

now what is after login go to home page............


% home.jsx

home page for a signup & login page.... different
abd the admin wala manus to accept changes and all..

so in login.jsx ki add after token navigate()
and initlize

navigate() is type of react-dom
so go and do changesss  😆   🏃‍♂️
in login.jsx

import Header from './Header';
import { Link ,//-useNavigate } from "react-router-dom";
import { useState } from "react";
import axios from "axios";

function Login() {
 //-const navigate = useNavigate();
  const [username, setUsername] = useState(""); // we are creating a state
  const [password, setPassword] = useState(""); // we are creating a state

  const handleApi = () => {
    console.log({username , password});// we are printing the username & password
    const URL = "http://localhost:4000/login";
    const data = {username,password};
    axios.post(URL,data)
    .then((res) => {
      console.log(res.data);
      if(res.data.message){
        alert(res.data.message);
        if(res.data.token){
          localStorage.setItem('token',res.data.token);
          //-navigate('/');
        }
      }
    })
    .catch((err) => {
      console.log(err);
      alert('SERVer ERR')
    });
  }


  return (
    <div>
      <Header />
      <h1>Login</h1>
      <br />
      USERNAME
      <input type="text" value={username}
      onChange={(e) =>{
        setUsername(e.target.value)
      }}
      />
      <br />
      PASSWORD
      <input type="password" value={password}
      onChange={(e) => {
        setPassword(e.target.value)
      }}
      />
      <br />
      <button onClick={handleApi}>LOGIN</button>
      <Link to ='/signup'><button>SIGNUP</button></Link>
    </div>
  );
}   
export default Login;    
all changesss



//- is define as cahnge part in whole code


now question is how we get known ki logined user or not so with the help of token we decide what doo  
to shown in header 

% header.jsx
import React from "react";
import './Header.css'
//import { Link , useNavigate } from "react-router-dom";
function Header () {
  
 // const navigate = useNavigate();

 // const handleLogout = () => {
    localStorage.removeItem('token');
    navigate('/login');
  }
  return (
    <div>
        <div className="header">
            <Link to="/home">HOME</Link>

            <span className="mt-3">Sell & Purchase ONLINE.... in your city</span>

            //{!localStorage.getItem('token') ?
            <Link to ='/login'> LOGIN </Link>:
            <button onClick={handleLogout}> LOGOUT </button> }
        </div>
    </div>
  );
};

export default Header;


changes in code of header...

the stop 17:57,240225
1:16:00 🛑⏸️ 


@-@

# REact page
 
% 2602225
as we back wit pushing code and slove and lost of error okh from this we create new folder for push into reppoo afte 2 hrs we back to try complet 30 mn

so we waant to change in home page 

% import { useEffect } from 'react';
% import Header from './Header';
% //import { useNavigate } from 'react-router-dom';
% function Home() {

%   //const navigate = useNavigate()
%   /Z*useEffect(() => {
%     if(!localStorage.getItem('token')){
%       navigate('/login')
%     }
%   *//})

%   return (
%     <div>
%       <Header />
%       <h1>Home</h1>
%     </div>
%   );
% }   
% export default Home;    

//:- changes part....
so simply without login the cannot shows an home page..

finally try to run its working now!!

so 2 ghosti zlattt

next ghost seller ko login and prduct fetch and data store (product) in database

% -----go to homepage.jsx to changes

% <Link to="/add-product"> ADD PRODUCT </Link>
After this change output we get error because we dont create any kind of link so now?

so in import after use navigate add a link 
% import { useNavigate , Link} from 'react-router-dom';
1 so above this will return a link for add product in webapge

2 now create component for that..
AddProduct.jsx

3 copy home page code and paste because simply some smae think that soo

4.code changes
% import { useEffect } from 'react';
% import Header from './Header';
% import { useNavigate } from 'react-router-dom';
% function AddProduct() {

%   const navigate = useNavigate()
%   useEffect(() => {
%     if(!localStorage.getItem('token')){
%       navigate('/login')
%     }
%   })

%   return (
%     <div>
%       <Header />
%       product page
%     </div>
%   );
% }   
% export default AddProduct;    

5.link in index.js in react-app
{
    path: "/add-product",  
    element: (<AddProduct/>),  
  },

  and now yu can see product page by clicking 


6 css is not looking like good so simply what to do 
use bootstrap....
go on site

% npm i bootstrap@5.3.3  ---- install on terminal

[text]🔗(https://getbootstrap.com/)

simply copy the link and in react-app in public folder go and paste in index.html

% <title>React App</title>
%     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
%   </head>

okhhhhh 🚀🎨

now we can use claases of bootstarp

7 go to bootstarp site and serach for from control
[text]🔗(https://getbootstrap.com/docs/5.3/forms/form-control/)

so we just copy classnaem for useing themin our code
% class="form-control" // we use className = 'form-control' in addproduct.jsx >input
now css look haahahah💻✨

8 changee in add product only/code changes

.... final changesd in code 💻 ......
import { useEffect, useState } from 'react';
import Header from './Header';
import { useNavigate, Link } from 'react-router-dom';
function AddProduct() {

    const navigate = useNavigate()
    const [pname , setpname] = useState('')
    const [pdesc , setpdesc] = useState('')
    const [price , setprize] = useState('')
    const [category , setcategory] = useState('')
    
    useEffect(() => {
        if (!localStorage.getItem('token')) {
            navigate('/login')
        }
    })

    return (
        <div>
            <Header />
            <div className='p-3'>

                <h2>ADD PRODUCT HERE :</h2>
                <label> Product Name</label>
                <input className="form-control" type="text" />
                <label> Product Description </label>
                <input className="form-control" type="text" />
                <label> Product Prize </label>
                <input className="form-control" type="text" />
                <label> Product Category </label>
                <input className="form-control" type="text" />
                <select className="form-control">
                    <option> Book</option>
                    <option> Newspaper </option>
                    <option> Bottle </option>
                    <option> Bucket</option>
                    <option> Clothes </option>
                </select>
                <button className="btn btn-primary mt-3"> Sumbit </button>
            </div>
        </div>
    );
}
export default AddProduct;    


so waht is happeing simply we need use a boootstrap for classname purpose to css yaa yaa🔍🐞
in mid of code we use states so go on....🧑‍💻

//as simple we can give stat aby kind of name ..

//after create state from each label we go with link part above code is pasted till state ..

simpply image fuction now we added like input and label wla part fro image and sa,e copde...

 <input className="form-control" type="file" onChange={(e) => {setpimg(e.target.value)}}/>

 small chnage for checking is on change after we print console like this
%  console.log(e.target.files)
<input className="form-control" type="file" onChange={(e) => {setpimg(e.target.files[0])}}/>
change babyy............👶

after cool changes we just do ki just all part of what handle api pass inside that by nae fromData

.code
 
    % const handleApi =() => {

    %     const fromData = new FormData();
    %     fromData.append('pname',pname)
    %     fromData.append('pdesc',pdesc)
    %     fromData.append('price',price)
    %     fromData.append('category',category)
    %     fromData.append('pimg',pimg)


    % }


import axios 

after that we fix erroo with captilot and  just go on with flow and ow e check fronrtend is working

.code
% import { useEffect, useState } from 'react';
% import Header from './Header';
% import { useNavigate, Link } from 'react-router-dom';
% import axios from 'axios';
% function AddProduct() {

%     const navigate = useNavigate();
%     const [pname , setpname] = useState('');
%     const [pdesc , setpdesc] = useState('');
%     const [price , setprize] = useState('');
%     const [category , setcategory] = useState('');
%     const [pimg , setpimg] = useState('');

%     useEffect(() => {
%         if (!localStorage.getItem('token')) {
%             navigate('/login')
%         }
%     })
    
%     const handleApi =() => {

%         const fromData = new FormData();
%         fromData.append('pname',pname)
%         fromData.append('pdesc',pdesc)
%         fromData.append('price',price)
%         fromData.append('category',category)
%         fromData.append('pimg',pimg)
        
%         const url = ''
%         axios.post(URL,fromData)
%         .then((res) => {
%           console.log(res)
%         })
%         .catch((err) =>{
%             console.log(err)
%         })

%     }
%     return (
%         <div>
%             <Header />
%             <div className='p-3'>

%                 <h2>ADD PRODUCT HERE :</h2>
%                 <label> Product Name</label>
%                 <input className="form-control" type="text"  value={pname} onChange={(e) => {setpname(e.target.value)}}/>
%                 <label> Product Description </label>
%                 <input className="form-control" type="text"  value={pdesc} onChange={(e) => {setpdesc(e.target.value)}}/>
%                 <label> Product Prize </label>
%                 <input className="form-control" type="text"  value={price} onChange={(e) => {setprize(e.target.value)}}/>
%                 <label> Product Category </label>
%                 <input className="form-control" type="text"  value={category} onChange={(e) => {setcategory(e.target.value)}}/>
%                 <select className="form-control"value={category} onChange={(e) => {setcategory(e.target.value)}}>
%                     <option> Book</option>
%                     <option> Newspaper </option>
%                     <option> Bottle </option>
%                     <option> Bucket</option>
%                     <option> Clothes </option>
%                 </select>
%                 <label> Product Image </label>
%                 <input className="form-control" type="file" onChange={(e) => {setpimg(e.target.files[0])}}/>
%                 <button onClick={handleApi} className="btn btn-primary mt-3"> Sumbit </button>
%             </div>
%         </div>
%     );
% }
% export default AddProduct;    
okh for tody see yoju tommroew

% v=28:51 /kh t=18;16

we back now ..
for react npm start
for node npm run dev

@-@

# Node js

go to index.js for addurl of add product..

after that same changes
% app.post('/add-product', (req, res) => {
%     console.log("Product Data:", req.body);
%     console.log("Uploaded File:", req.file);

%     // Ensure response is sent
%     res.json({ message: "Product added successfully!", data: req.body, file: req.file });
% });

now go back in add product and give url like send request on localhost 4000


image data pass the we use multer
so install npm multer:- npm install multer

% copy paste const multer = require('multer'); //in index.js
% const multer = require('multer');
% const storage = multer.diskStorage({
%   destination: function (req, file, cb) {
%     cb(null, 'uploads')
%   },
%   filename: function (req, file, cb) {
%     const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9)
%     cb(null, file.fieldname + '-' + uniqueSuffix)
%   }
% })

% const upload = multer({ storage: storage })


copy paste siimple propsse and create a uploads folder in inside node folder

copy paste : upload.single('uploaded_file')
paste after adddproduct url in index.js


now lets see the file which we upload on frontend run part will display and save in uploads folder ok..... so click on react-app o/p sumbit button......

after solving error the finally our 1 error solve and file get uploaded..

v= 38.13... t=1:35

[Object: null prototype] {
  pname: 'bottle',
  pdesc: 'used bottle we can reuse themm',
  price: '10 per kg',
  category: 'Bottle'
}
{
  fieldname: 'pimg',
  originalname: 'bottle.jpg',
  encoding: '7bit',
  mimetype: 'image/jpeg',
  destination: 'uploads',
  filename: 'pimg-1740769272320-247812759.jpg',
  path: 'uploads\\pimg-1740769272320-247812759.jpg',
  size: 17519
}


% this type of data we get in output to after upload so we dne with this so go with v..

so image come in api but not in dtabase so for that go in database
we 
index.js changes in console log of aap.post of add product
is after .file//.path


%creating databse for add product to store that data like store copy paste code of like we made or user same and same changes

.code
% const Products = mongoose.model('Products', { pname: String, pdesc:String, price:String, category:String, pimg:String});

% app.post('/add-product',upload.single('pimg'),(req,res)=>{
%     console.log(req.body)
%     console.log(req.file.path)
%     const pname  = req.body.pname;
%     const pdesc  = req.body.pdesc;
%     const price  = req.body.price;
%     const category  = req.body.category;
%     const pimg  = req.file.path;

%     const product = new Products({ pname, pdesc, price, category, pimg});
%     product.save()
%     .then(() => {
%       res.send({message : 'Product is Saved'})
%     })
%     .catch(() => {
%     res.send({message: 'Server Error'});  
%     });

% })

indexjs changes after data store in dtabase..
% this for after postt the dtaa get data in frontend

app.get('/det-products',(req,res)=>{
  Products.find()//findall
  .then((result)=>{
    console.log(result, "product data")
    res.send({message:"succesfully saved.."})
  })
  .catch((err)=>{
    res.send({message:"server err"})
  })
})

% add after app.post()
ann go and check it on local:4000/get-products
% so as msg we get a sucessfully saved

so anoher chnages in smae code in res.send after sucessfulyy saved add one line ,products:result
.code chnagee in line
    res.send({message:"succesfully saved.." //, products : result})


output....
{"message":"succesfully saved..","products":[{"_id":"67c217bf065de8f7be516bb1","pname":"Used newspaper","pdesc":"reusable for any work like what you want","price":"15.rs  per kg ","category":"Newspaper","pimg":"uploads\\pimg-1740773311207-283373932.jpg","__v":0}]}

-------------------------------------------------

% so now we work on like after user add product or login onther user then th eproduct need to show on home pagefor unlog person can also seee

for futher user admin seller role...🤷‍♂️


@-@

# REact page

home.jsx

use effect with empty array


 useEffect(() => {
    const url = 'http://localhost:4000/get-products';
    axios.get(url)
    .then((res)=>{
      console.log(res)
    })
    .catch((err)=>{
      console.log(err)
    })
  })

  % automatically show in webpageterminal.. api data

%   //creating stae for products
%   const[products,setproducts] =useState([]);

%  useEffect(() => {
%     const url = 'http://localhost:4000/get-products';
%     axios.get(url)
%     .then((res)=>{
%       console.log(res)
%       if(res.data.products)
%       {
%         setproducts(res.data.products);
%       }
%     })
%     .catch((err)=>{
%       console.log(err)
%       alert("server error")
%     })
%   })

simple changes to run and save data and showm on fntend every product..

in...
Home.jsx..

      <h2> My Product </h2>

      {products && products.length > 0 && 
      products.map((item,index) => (
        <div className="card m-3">
          <img src = {item.pimg} />
          <p className='p-2'>{ item.pname } | { item.category } </p>
          <p className='p-2' text-text-sucess>{ item.pdesc }</p>
          <p className='p-2' text-text-sucess>{ item.price }</p>
        </div>
      ))}


some changes simpply we dooo and image task is on the way so solve that lets see

so fro checking copy image url for terminal/console from wbapg but nothing get happen so for solution we go on chatgpt and copy some type of to get 




@-@

# Node js
index.js

const path = require('path');
% add this on top
app.use('/uploads',express.static(path.join(__dirname, 'uploads')))
% addd this in middle. 
this is for to showm image in frottend and used as a small idea

% now go on frotend and just copy url and / at end add in frotend i home.jsx



@-@

# REact page
homepage.jsx


          <img src = { 'http://localhost:4000/ ' + item.pimg} />
%  ERROR IS SIMPLE A SPACE AFTER / SO BE CAREFULL NEXT TIME..

%  SO IN OUTPUT WE GET PRODUCT IMG , PRICE ,DESCRIPATION ETC....

2/03/25

home.jsx
% fix height and width of image  by 400px and 200px
.code line
      %   {products && products.length > 0 && 
      % products.map((item,index) => (
      %   <div className="card m-3">
      %     <img width="500px" height="200px"  src = { 'http://localhost:4000/' + item.pimg} />
      %     <p className='p-2'>{ item.pname } | { item.category } </p>
      %     <p className="p-2 text-success">{ item.pdesc }</p>
      %     <p className="p-2 text-success">{ item.price }</p>
      %   </div>

add one more div after h2 tag of my product..😭
      % <div className='d-flex justify-content-center flex-wrap'>

so restrication for add product to only login user ...
home.jsx
% cpopy token  code and paset inside link tag
  {localStorage.getItem('token') && <Link to="/add-product"> ADD PRODUCT </Link>}
% so simple we cannot access home page now if we logiut or new user?

  % // useEffect(() => {
  % //   if (!localStorage.getItem('token')) {
  % //     navigate('/login')
  % //   }
  % // }, [])

% after commenting this code we get a home page without login so now we dont get an add product option or api

% so now changes in css in classname remove p-3 //padding and change in prize shift above and dec came down simple prize changein succes vis dangerr.
  % <div>
  %     <Header />
  %     {localStorage.getItem('token') && <Link to="/add-product"> ADD PRODUCT </Link>}

  %     <div className='d-flex justify-content-center flex-wrap'>
  %     {products && products.length > 0 &&
  %       products.map((item) => (
  %         <div className="card m-3">
  %           <img width="500px" height="200px" src={'http://localhost:4000/' + item.pimg} />
  %           <p className='m-2 '>{item.pname} | {item.category} </p>
  %           <p className="m-2 text-danger">{item.price}</p>
  %           <p className="m-2 text-success">{item.pdesc}</p>
  %         </div>
  %       ))}
  %      </div>
  %   </div>
  % );

  all changes in code home.jsx soo simpl as that css part we can chnage ass

  so after adding product we need to redirect the oage so for that we to doo

copy a line navigate wali for login.jsx and come in add product.jsx file and after  url .then condition console ke ntre writeeee...
.code part

%  const url = 'http://localhost:4000/add-product';
%         axios.post(url, fromData)
%             .then((res) => {
%                 console.log(res)
%                 if (res.data.message) {
%                     alert(res.data.message)
%                     navigate('/')
%                 }
%             })
%             .catch((err) => {
%                 console.log(err)
%             })

%     }

% addproduct.jsx

now we can render on home page after changes or add product 

3-3-25
% fronrtend
% Header.jsx...............

code line..
% creating serach bar.............
<_-------------------------------------------_>
%  {/* code line for search barrrr */}
%             <input className="search" type="text" />
%             <button className="search-btn">SEARCH</button>


% header.css for search bar and search button 
<---------------------------------------------->
% .search{
%     margin-left: 20px;
%     outline: none;
%     padding-left: 10px;
%     width: 200px;
%     height: 35px;
%     border: 2px solid #002f34;
%     border-radius: 5px 0px 0px 5px;
% }
% .search-btn{
%     height: 35px;
%     background: #002f34;
%     color: #fff;
%     border-radius: 0px 5px 5px 0px;
%     outline: none; /*like this none for remove default funda on outline */
%     border: none;  
% }

👍👍👍👍

next we need to workon serach like we search for anything na so we need to ridrect orget that product..

s we used props in header 
code.
% header.jsx
%  <input className="search" 
%             type="text"
%             value={props && props.search}
%             onChange={(e) => props.handlesearch && props.handlesearch(e.target.value)}
            
%             />
to check the value in output search bar will shows or pass in home page header as same or not 
% home.jsx

      % <Header search={'omom'} />
% so as this is same beause of props so now handle search get reamining 

i use din home and handle in header
  % homee.jsx

  % const [search, setsearch] = useState('hhh');

  %  const handlesearch = (value) => {
  %   setsearch(value);
  % }

      % <Header search={search} handlesearch={handlesearch} />

% header.jsx ............. button
        % <button className="search-btn" onClick={() => props.handleClick && props.handleClick()}>SEARCH</button>


% home.jsx
% const handleClick = () => {
%     console.log('clcik');
%   }
      % <Header search={search} handlesearch={handlesearch} handleClick={handleClick} />

% so now talk about product so get by api from that simple api url change or directly on ibnside const.

24.09 t = 1.56
% home.jsx

  % const handleClick = () => {
  %   console.log('producttt', products);
  %   let filteredProducts = products.filter((item) => {
  %     if (item.pname.includes(search) || item.pdesc.includes(search)|| item.category.includes(search)) {
  %       return item;
  %     }
  %   })
  %   setproducts(filteredProducts)
  % }


% this above code change in includes and filer wala part for  chaeck product is present or not and then serach 
👍👍👍👍👍👍


so now if write on search bar in lower cas that condition what to do?
% so change in code add after the pname or any aother a toLowerCase()

% item.pname.toLowerCase().includes(search) || item.pdesc.includes(search)|| item.category.includes(search)) 

% so we done with search part..........😭😭😭😭

% so now just removethe sell and purchanse text fro header🤷‍♂️

<---------------------------------------------------------->
⚒️⚒️⚒️⚒️
% now search bar and button and logout to align at place of that like center and left side for that
so we divide into divvvv
% so in header.jsx
% changes in header fro fix it by adding headr cntainer in namde of first div in heder.jsx
% <div className="header-container d-flex justify-content-between"> ..htme/react part
% .header-container{
%     box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;
%     padding: 10px 20px;

% }........................css part

🔧🔧

now botton syle for logout as lik search button...🎨
give class name to logout button and same css copy paste fpor logout as search


🔑 creating unique key for child
% so go in home.jsx and chaneg in dicv by creating a key inside of that....after return beacuse its not rendering after changeing the word in search barr

% creating category section by using inide compoents we crearte category sectionnnn 🛠️
copy heder code and paset in categoriess
import React from "react";
import { Link, useNavigate } from "react-router-dom";
// import { Link } from "react-router-dom";
function Categories(props) {


  return (
    <div className="cat-container d-flex justify-content-between">
      <div>A</div>
      <div>B</div>
    </div>
  );
}
export default Categories;
% after changes this code and more change in code i will paste after words
call caotegorie components in home.jsx 
so after that change classnmae and just we can right in header.css to the code od css of coategories

% stop for toda v=44.00 and t = 03.04🛑
commit the codee..🖋️

3325
% run backend first and go for frontend the..
% open mongodb and connect api and go on...

% simply to get product we need towrite in backend a /get-product okh.......

call catgory in home
<Categories />
so we dont need to register in router because we are not using in router so no required..


% so where does the cateogries come from so for that
save it array by creating a file...

% so simple writing code we need categories soo we goo to check how many categories in the ist..
////categories.js file

% let Categories = [  'Book' , 'Newspaper' , 'Bottle' , 'Bucket' , 'Clothes' , 'Sale', 'Old  Fans' ]

% export default Categories;

so simppe this code i right in this we can get by api or store in database 
so used this categories in where in Categories.jsx file🎭

% before that rename the js file with CategoriesList.js
import categories from "./CategoriesList.js";
function Categories(props) {


  return (
    <div className="cat-container d-flex justify-content-between">
      <div>A</div>
      <div>
        { categories && categories.length > 0 &&
        categories.map((item, index) => {
           return (
             <span> kkk</span>
           );
        })}
      </div>
    </div>
  );
}
export default Categories;
% change in code so span one part return kk for product is many that time its givee..

.code line 
                % <span className="category"> {item} </span>
changes to get item which i pass in array...

now go in header.css to styling of categories🎨


% header.css changes..🎨
.category{
    color: rgba(0, 47, 12, 1);
    padding: 7px;
    cursor: pointer;
}

% now change in classnmae of Categories.jsx 
  return (
    <div className="cat-container">
      <div>
        <span className="p-3"> All Categories </span>
        {categories && categories.length > 0 &&
          categories.map((item, index) => {
            return (
              <span key={index} className="category"> {item} </span>
            );
          })}
      </div>
    </div>
  );
}

% now header.css changes in code copy header-conatiner and paste and cange in cat-ontiner 🎨
.cat-container{
    box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;
    padding: 10px 20px;
}

% 🔧🔧🔧🔧🔧🔧🔧🔧🔧🔧🔧🔧🔧
now work on whenb we click on any categories it will shows that only shoo no go on ...🛠️

% go to categories.jsx

   <span onClick={() => props.handleCategory && props.handleCategory(item)} key={index} className="category"> {item} </span>

   after that where we used categorie sgo on that folder and change itt..
  %  go to home.jsx

 const handleCategory = (value) =>{
  console.log(value,"v")
 }
    <Categories handleCategory ={handleCategory} />

%  we getting after click the console but not the apge of that categories so gon categories.jsx to check in span..

so we used filter single filter😭
% so for that we go on home.jsx step 1
% now copy filtered data which we created for search step 2
% and paste in home.jsx after that product caotegory 
% some changes we required filter so used one only..

 const handleCategory = (value) => {
    console.log(value, "v")
    let filteredProducts = products.filter((item) => {
      if (item.category.toLowerCase() == (search.toLowerCase())) {
        return item;
      }
    })
    setproducts(filteredProducts)
  } 


🔥🔥🔥🔥🔥🔥🔥🔥 so go and check 

% no ficx eeror come not showig on console to solve we required
% the both on search and  categories

so mind blowing erroe which is like when you cloick on categories in first like eg book u render to that paricular ystem but after you u try to go agiin on same categories its not showing.. so slution following code...😭😭😭😭😭

4;3;25 t = 23;57
the raeson: 
ki for before changing for one products thats why its not switiching so solutio i simple below code:


.code 
import { useEffect, useState } from 'react';
import Header from './Header';
import Categories from './Categories';
import { useNavigate, Link } from 'react-router-dom';
import axios from 'axios';

function Home() {

  const navigate = useNavigate()

  //creating stae for products
  const [products, setproducts] = useState([]);
  const [cproducts, setcproducts] = useState([]);
  const [search, setsearch] = useState("");

  // for not acces home page without login thi useeffrct is used..
  // useEffect(() => {
  //   if (!localStorage.getItem('token')) {
  //     navigate('/login')
  //   }
  // }, [])
  useEffect(() => {
    const url = "http://localhost:4000/get-products";
    axios
      .get(url)
      .then((res) => {
        if (res.data.products) {
          setproducts(res.data.products);
        }
      })
      .catch((err) => {
        alert("server error")
      });
  }, []);

  const handlesearch = (value) => {
    setsearch(value);
  }
  const handleClick = () => {
    let filteredProducts = products.filter((item) => {
      console.log(item)
      if (item.pname.toLowerCase().includes(search.toLowerCase()) ||
        item.pdesc.toLowerCase().includes(search.toLowerCase()) ||
        item.category.toLowerCase().includes(search.toLowerCase())) {
        return item;
      }
    })
    setproducts(filteredProducts)
  }

  const handleCategory = (value) => {
    let filteredProducts = products.filter((item,index) => {
      if (item.category == value ) {
        return item;
      }
    })
    setcproducts(filteredProducts)
  }


  return (
    <div>
      <Header search={search} handlesearch={handlesearch} handleClick={handleClick} />
      <Categories handleCategory={handleCategory} />
      {localStorage.getItem('token') && <Link to="/add-product"> ADD PRODUCT </Link>}

      <h5>SEARCH PRODUCTS : </h5>

      <div className='d-flex justify-content-center flex-wrap'>
        {cproducts && products.length > 0 &&
          cproducts.map((item, index) => {
            return (
              <div key={item._id} className="card m-3" >
                <img width="500px" height="200px" src={'http://localhost:4000/' + item.pimg} />
                <p className='m-2 '>{item.pname} | {item.category} </p>
                <p className="m-2 text-danger">{item.price}</p>
                <p className="m-2 text-success">{item.pdesc}</p>
              </div>
            )
          })}
      </div>
        <h5>ALL RESULTS : </h5>

        <div className='d-flex justify-content-center flex-wrap'>
          {products && products.length > 0 &&
            products.map((item, index) => {
              return (
                <div key={item._id} className="card m-3" >
                  <img width="500px" height="200px" src={'http://localhost:4000/' + item.pimg} />
                  <p className='m-2 '>{item.pname} | {item.category} </p>
                  <p className="m-2 text-danger">{item.price}</p>
                  <p className="m-2 text-success">{item.pdesc}</p>
                </div>
              )
            })}
        </div>
    </div>
  );
}
export default Home;    

chnage in handle category and add copy paste the ustatste of product and cprodct and then changes in div whole copy pate again and searched and all result divide simple....😂😂😂😂😂

but we solved categories errro but not serach so for that.... after one typng second time arraty get empty to solved them below changes in code..
% this data can fetch by writing line of code or just fetch code from backend........

% hnadle clicked :     setproducts(filteredProducts) #before
%     setcproducts(filteredProducts) #after

% removed the console.log..........
from all filessss

now 2 worked is done now work on third likeee..
1. search wala
2.categorie 

3like in next seesion 

before that we work on backend to fetch data from to categories
if products are les then they need ftech from frotend if its more than it need to be fetch frm backrend....

% nexst process on icon 
search on online : react icons

------------terminal-------------
install:-npm install react-icons //inside react floder
2. go documentataion page : link🔗 :[text](https://react-icons.github.io/react-icons/)
3.search for heart on linkdocumentation
4.copy and go to home.jsx
now where we ant to shownon product 
in  code import it and used it so simple i gie code line:
used in first div before img tag... 


errar faced so solevd itt...
import { FaHeart} from 'react-icons/fa';
                  <FaHeart className='icons'/>//inside both serached all result div bedore imae tahg..


% go to App.css

🚀 : so server and applicatiin want to restarat because whenever you ad sometghong or package so it need to 

5325..
% so app.css for iicons in home 
so go again 4 v
.icons{
  font-size: 32px;
  height:32px;
  width: 332px;
  color: rgb(245, 240, 240);

}
now go in home.jsx and just add style insid the  <FaHeart className='icons'/>/tag
% waht simply we do is changes inside div tag used itt and div give a name icons-container
% .cod line
 <div className="icons-conatiner">
     <FaHeart style={{ color: 'red', fontSize: '32px' }} />
</div>
% so we creating home.css for styling on home....
% and import in home.jsx🙏🙏

so now what is happen we crerate a file for home styling so now...
delete style from above as we define now we jsut 

home.css
.icons{
    font-size: 32px;
    height:32px;
    width: 32px;
    color: rgb(245, 240, 240);
}
.icons-conatiner{
  position : absolute;
    top : 0;
    right: 0;
    border-radius: 50%;
    padding: 7px;
    background-color: #fff; 
    margin: 7px
}

so after this changes what actually we did is just changes in styling add like butoon in  eft side and cool it all funda looks fiffernt afterward we do when clickwd its color change into red..

  .icon:hover{
    color: red
  }
add before icon-container

% now styling on links....
.links{
    text-decoration: none;
    font-size: 24px;
    color: #002f34;
    font-weight: bold;
}
/* for this give the link clasname as links */ = header.jsx add button and add top lets see...

now add product ko button bante hai bhaii..= home.jsx
   {!!localStorage.getItem('token') && <Link to="/add-product"><button className='logout-btn'>ADD PRODUCT</button>  </Link>}

% cut this line and paste inside the header after secod last div  and go to header.cs logout-btn css and changes in margin...😭
✅✅✅✅
.logout-btn{
    height: 35px;
    background: #002f34;
    color: #fff;
    border-radius: 5px ;
    outline: none; /*like this none for remove default funda on outline */
    border: none;  
    padding: 1px 16px;
    margin-right: 10px;
}//header.css
      <div>
      {!!localStorage.getItem('token') && 
      <Link to="/add-product"><button className='logout-btn'>ADD PRODUCT</button>  
      </Link>}

        {!localStorage.getItem('token') ?
          <Link to='/login'> LOGIN </Link> :
          <button className="logout-btn" onClick={handleLogout}> LOGOUT </button>}
      </div>//header.jsx


5 v work is when we clicked on liked its goes in backend and save....!!
7325.......
% so work on add to fav wala ig and the when we clicked on product we go that page okh.. + css changes
% run server both side 👍👍👍👍👍👍👍👍

% go node folder inside that index.js and check what things user ahve..........addlik product in that.. so go on code line will paste here...... //-is indicates the changes in code.

[{ type : mongoose.Schema.Types.Objects,ref:'Products'}]// this tell as type of mongoose is schenma which objectid save objeect id which created by mongo..type of objectid
so simple we picked up for here for product if we need more so popluated itt..

% in const part📝
const Users = mongoose.model('Users', 
  { username: String, 
    password: String,
    // likedProducts : [{type : mongoose.Schema.Types.Objects,ref:'Products'}]
  });  // we are creating a model


% post 📝

app.post('liked-product', (req ,res) =>{
    let productId = req.body.productId;
    let userId = req.body.userId;

    //update user model
    Users.updateOne({_id: ObjectId( userId )} ,{$addToSet : { likedProducts : productId }})
    .then(() => {
      res.send({message : 'Liked successfully'})
    })
    .catch(() => {
    res.send({message: 'Server Error'});  
    });
})


<!-- Api is ready hit them from frontend in home.jsx... 📦-->
now simple to do ki in fav product div onclicked an othr work go in that...
<!-- 
     <div onClick={handleLike} className="icons-conatiner">
                  <FaHeart className='icons' />
                </div>
              this onclied change in both  -->

 const handleLike = () => {
    console.log('user id', 'product id')
  }
<!-- normal to checked its working or nott..... -->

<!-- after sloving a small error  we go to the  -->
now get it..

<!-- as simple we get product id in output console okh  -->
<div onClick={() => handleLike(item._id)} className="icons-conatiner">
                  <FaHeart className='icons' />
                </div>


 const handleLike = (productId) => {
    console.log('user id', 'product id',productId)
  }

<!-- changes in code onclied and in console and () -->

<!-- now again logout go to knowm user id we go on index.jsand check login api -->
<!-- so simple when user login how we save token  like that user id saved when use rlogin --> for that chanegs in login.jsx to 

<!-- index.js login post wala else part
        res.send({message : 'User found',token:token , userId : result._id}) //user data found
 -->

 <!-- login.jsx 
 in const dat username name etc secon if part
 localStorage.setItem('userId',res.data.userId); -->
<!-- now after changes we go to login again to get user id with tokeen  -->

/////<!-- so check that go in output console  , next go in appliction next in right side click on console option etc and go on...... you can se your taken and userId ✅-->////

/////so we want in home page so we go to on home.jsx and changes in code line ..............

 const handleLike = (productId) => {
    /let userId = localStorage.getItem('userId')
    /console.log('user id', 'product id',productId,userId)
  }

<!-- changes in code / so simple as that and no sent to api  -->
<!-- index.js  
app.post('/liked-product', (req ,res) =>{
-->

changes in code 
<!-- home.jsx 
const handleLike = (productId) => {
    let userId = localStorage.getItem('userId');
    console.log('user id', 'product id',productId,userId);
    const url = "http://localhost:4000/liked-product";
    const data = { userId , productId } // same things so not required to write double productId:prooduict..
    axios.post(url,data)
      .then((res) => {
        if (res.data.products) {
          setproducts(res.data.products); // chaneg in the codee 
          before this check in console.log(res)
        }
      })
      .catch((err) => {
        alert("server error")
      });

  }
 -->


 <!-- remove all console in index.js to not required ❌❌ -->

 <!-- index.jss 
   
    console.log(req.body)
    return; 
    to check it getting or not in output consolee......  in terminal of nod also .. -->
    <!-- now when we cliked in liked w eget wjolwe data iof product like din output console.......
    {data: {…}, status: 200, statusText: 'OK', headers: AxiosHeaders, config: {…}, …}config: {transitional: {…}, adapter: Array(3), transformRequest: Array(1), transformResponse: Array(1), timeout: 0, …}data: {message: 'Liked successfully'}headers: AxiosHeaders {content-length: '32', content-type: 'application/json; charset=utf-8'}request: XMLHttpRequest {onreadystatechange: null, readyState: 4, timeout: 0, withCredentials: false, upload: XMLHttpRequestUpload, …}status: 200statusText: "OK"[[Prototype]]: Object -->



 <!-- yes we are getting it so go in mongo to checked we are getting the liked dat in mongo to......... 📡-->

<!-- so now go aND CREAT A NEW USER TO GET LIKED PRODCUTR ARRAY ...........💾.. -->
remove all user to get again anew data , remove console.log in index.js 🧪

<!-- remove condole log from hom.jsx to after  handle liked coonst next wala -->
 axios.post(url,data)
      .then((res) => {
        if (res.data.message) {
          alert('Liked')
        }
      })🚀🚀

<!-- now check in like dis okh . -->
<!-- Liked product created to saved all liked product so create inside comonents -->
@-@

# REact page

// copy home page coe to paste inside this okh 😊
<!-- liked products in same as homepage bas like  liked product save dther eso do it some changes okhhhh -->
 
<!-- first render in index.js in react-app -->
{
    path: "/liked-products",
    element: (<LikedProducts/>),
  },
  <!-- after adding this line inside the index.js we get an good virw after in out put in chages add /after locl host... -->
[text](http://localhost:3000/liked-products)🔗

<!-- liked.jsx 
 useEffect(() => {
    const url = "http://localhost:4000/liked-products";
    axios 
    it give an error : because nothing inside that... -->


@-@

# Node js
index.js

<!-- chnages get-products  with liked-product
app.get('/liked-products', (req, res) => {
  Users.find() -->
  copy paset get prooduct api..first ?
froms user we search how many dta and teh n likedproduct wali ali

<!-- .code changes

app.get('/liked-products', (req, res) => {
  Users.find({_id: req.body.userId}).populate('likedProducts')
    .then((result) => {
      res.send({ message: "succesfully saved..", products: result.likedProducts})
    })
    .catch((err) => {
      res.send({ message: "server err" })
    })
})
 -->

after the raect code chnages\ change sin react code to ge only result in post api
and change in find with findOne
@-@

# REact page


likedproducts.jsx

let data = { userId : localStorage.getItem('userId)}
axios.post(url,data)// change in code line

<!-- errror to update mongo  -->
solved we get ouput as fav in /liked-product
<!-- so created a link foor like product  in header -->
<!-- go to Hedaer.jsx -->
/////

<!-- copy paste code of add produt ig some lne chages -->


////////now work on 4 product s show in line 
<!-- home.jsx -->
<!-- change image width and height eith 250px and 150px chnage in txt of prize 
             </div>
                <img width="300px" height="200px" src={'http://localhost:4000/' + item.pimg} />
                <p className="m-2 price-text"> Rs.{item.price} /</p>
                <p className='m-2 '>{item.pname} | {item.category} </p>
                <p className="m-2 text-success">{item.pdesc}</p>
              </div>-->
hardcoded Rs. and ..../
  <p className="m-2 price-text"> Rs.{item.price} /-</p>

<!-- in home.css//////// -->
.price-text{
    color: #002f34;
    font-size: larger;//
    font-weight: 700;// this two my lines
}

<!-- chnages in header background  -->
<!-- go heade.cc in header-conatiner/// -->
.header-container{
    box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;
    padding: 10px 20px;
    background-color: #002f3400;
    border-bottom: 3px solid #fff;
}
.cat-container{
    box-shadow: 0 1px 4px 0 rgba(0,0,0,.1);
    padding: 8px 20px;
}

<!-- and in serach button and input 
.search{
    margin-left: 80px;
    outline: none;
    padding-left: 10px;
    width: 400px;//
    height: 44px;//
    border: 2px solid #002f34;
    border-radius: 5px 0px 0px 5px;
}
.search-btn{
    height: 44px;//
    background: #002f34;
    color: #fff;
    border-radius: 0px 5px 5px 0px;
    outline: none; /*like this none for remove default funda on outline */
    border: none;  
} -->


<!-- button changes  go t raect-icons -->
<!-- go to header.jsx -->


<!-- now we need detailed page  -->
create ProductDetail.jsx
and add in raact-app
index.js 
call /productdetail
index.js
{
    path: "/product/:id",
    element: (<ProductDetail/>),
  },
<!-- output -->
[text](http://localhost:3000/product/22)
shows waht you sasve inside function

<!-- go to home.jsx -->

 <div onClick={handelProduct} key={item._id} className="card m-3" >
 changes in code line and set in const before all return..............
<!-- changes -->

  <div onClick={() => handleLike(item._id)} className="icons-conatiner">

<!-- sett
const handelProduct = (id) =>{
  navigate('/product/'+id)
} -->

so when you clicked on home page you get product get by id by ommmom 

<!-- go to product-detail  -->
 const p = useParams()
    console.log(p) //add and we get id and console.log..
<!-- change in index.js in id only with productId -->

o/p:- {productId: '67c359b97b3486487638f62f'}productId: "67c359b97b3486487638f62f"[[Prototype]]: Object in console of output

    console.log(p.productId)
<!-- so we are getting prodduct id and id okh  -->
<!-- /////////////////////////////////////////////////////////////////// -->

<!-- now we want to send it to backend  -->

<!-- go to productDetail.jsx -->

    useEffect(() => {
        const url = "http://localhost:4000/get-product" + p.productId;
        axios
            .get(url)
            .then((res) => {
               console.log(res)
            })
            .catch((err) => {
                alert("server error")
            });
    }, []);
    //copy by home page its show in errro because  not call in backend so go in node index.js



@-@

# Node js
index.js
copy get-product and pste in next
<!-- r product detail
app.get('/get-product',(req,res)=>{
  console.log(req.params)
  
  Products.find()//findall
  .then((result)=>{
    res.send({message:"succesfully saved.." , products : result})
  })
  .catch((err)=>{
    res.send({message:"server err"})
  })
}) -->

<!-- and go to product deatil and solve erroor whic axiso import -->

index.js
app.get('/get-product/:id',(req,res)=>{

  Products.findOne( {  _id :req.params.pId } )

@-@

# REact page

80525....
        const url = "http://localhost:4000/get-product/" + p.productId;
<!-- inside Product -->

ouput we get id...../////////.

<!-- after changing each we go to inspect in output by in urllocalhost:3000/product and by inscept go to network and go in preview to check ......... -->

afetr ouput get it 


<!-- ProductDetail.jsx --> from singl product will be show
show that product and sav it innn


futher dettailsss

dupariiiii 1hrs wasssssssssste to solve error
<!-- so new code update to show the product as output -->

import { useParams } from "react-router-dom";
import { useEffect, useState } from "react";
import axios from "axios";
import Header from './Header';
function ProductDetail() {

    const [product, setproduct] = useState()
    const p = useParams()

    useEffect(() => {
        const url = "http://localhost:4000/get-product/" + p.productId;
        axios.get(url)
            .then((res) => {
                if (res.data.product) {
                    setproduct(res.data.product)
                }
            })
            .catch((err) => {
                alert("server error")
            });
    }, []);

    return (
        <>
            <Header />
            <div>
                PRODUCT DETAILS :
                {product && <div className="d-flex justify-content-between flex-wrap">
                    <div>
                        <img width="700px" height="300px" src={'http://localhost:4000/' + product.pimg} alt="" />
                        <h6>PRODUCT DETAIL:</h6>{product.pdesc}
                    </div>
                    <div>
                        <p className="m-2 price-text"> Rs.{product.price} /-</p>
                        <p className='m-2 '>{product.pname} | {product.category} </p>
                        <p className="m-2 text-success">{product.pdesc}</p>
                        {/* go  to home.jx for p tag */}
                    </div>
                </div>}
            </div >
        </>
    )
}

export default ProductDetail;

<!-- next v we afre need to fetch contact detail and address baa bal -->
<!-- for tha when we add product we go with user id to be save...... -->
<!-- one admin usr have a power that he can can remove or block spam user -->


d-80325,v=6  
<!-- so we make a search api we are searching locally before now take it from baceknd okh....... -->


work on product deatail all categories././././././
<!-- addd product ask for 2 image in addig  -->

@-@

# Node js
index.js

<!-- now/../ working search api
 -->


app.get('/search', (req,res) => {

  let query =  req.query;

  Products.find()
  .then((result) =>{
    res.send({message:'success', product:result})
  })
  .catch((err) =>{
    res.send({message: ' server error in search '})
  })
});

after home.jsx change in codde down we error not show just pass query we write 
index.js
//for search
app.get('/search', (req,res) => {

  let query =  req.query;
  console.log(query);
  return;



@-@

# REact page

home.jsx

  const handleClick = () => {
    
    const url = 'http://localhost:4000/search?search=' + search ;
    axios.get(url)
    .then((res) => {
      console.log(res.data)
    })
    .catch((err) => {
      alert("server error")
    });

    // let filteredProducts = products.filter((item) => {
    //   if (item.pname.toLowerCase().includes(search.toLowerCase()) ||
    //     item.pdesc.toLowerCase().includes(search.toLowerCase()) ||
    //     item.category.toLowerCase().includes(search.toLowerCase())) {
    //     return item;
    //   }
    // })
    // setcproducts(filteredProducts)


  }


@-@

# Node js
index.js

in momdodb query we want to add something we used $

.code
app.get('/search', (req, res) => {
  let search = req.query.search;
  Products.find({
    $or: [
      {pname: { $regex: search} },
      {pdesc: { $regex: search} },
      {price: { $regex: search}},
    ]
  })
    .then((result) => {
      res.send({ message: 'success', product: result })
    })
    .catch((err) => {
      res.send({ message: ' server error in search ' })
    })
});
so thse work in backend api to fetch it . so we search in output we get a product in network etc..


@-@

# REact page

chagne in code line ...

because we not able tosee in search product so for that we work with that and change the below line 
axios.get(url)
    .then((res) => {
      setcproducts(res.data.products);


<!-- 
solve the error of results in index .js and home.js is about products to product..
index.js :  .then((results) => {
      res.send({ message: 'success', product: results })
home.jsx: axios.get(url)
    .then((res) => {
      setcproducts(res.data.product)
 -->


during writeing the code be careefully in wordssss..



<!-- now work on switch like show only search and all product diffret  -->
<!-- home.jsx -->


      {search && cproducts && <h5>SEARCH RESULT : </h5>}
      {search && cproducts && cproducts.length == 0 && <h5> No Result found......... </h5>}

      {search && (
        <>
          <div className='d-flex justify-content-center flex-wrap'>
            {cproducts && products.length > 0 &&
              cproducts.map((item, index) => {

above line of code is for changes in wehen only search it need to work

<!-- supper duper cool -->

shift + {} to ad in selected code 

<!-- last dicv in home.jsx changes wohh for remove all result and differntin serarch and all rsukt aotoimatically in chnage in code... -->
      {!issearch && <div className='d-flex justify-content-center flex-wrap'>
        {products && products.length > 0 &&
          products.map((item, index) => {
            return (
              <div onClick={() => { handelProduct(item._id) }} key={item._id} className="card m-3" >
                <div onClick={() => handleLike(item._id)} className="icons-conatiner">
                  <FaHeart className='icons' />
                </div>
                <img width="300px" height="200px" src={'http://localhost:4000/' + item.pimg} />
                <p className="m-2 price-text"> Rs.{item.price} /-</p>
                <p className='m-2 '>{item.pname} | {item.category} </p>
                <p className="m-2 text-success">{item.pdesc}</p>
              </div>
            )
          })}
      </div>}


now addd option clear result..
<!-- changes after search resulut divvvvvvvvvv
  {issearch && cproducts && <
        h5>SEARCH RESULT :
        <button className="clear" onClick={()=> setissearch(false)}> CLEAR </button>
         </h5>}-->

<!-- home.css clear-btn working for css so we seee
 -->
next 28;12 category workkkkk...

90325 - d  6 -v

<!-- copy home.jsx code and paste inside and create a CategoryPage.jsx and paste here....... -->

call inside index.js in frontend......

<!-- next...... -->

categories.js
<!-- changes in code line 
           <span onClick={() => props.handleCategory && props.handleCategory(item)} key={index} className="category"> {item} </span>
 after: 
              <span onClick={() => navigate('/catgeory/' + item)} key={index} className="category"> {item} </span>
              -->


<!-- now nextt.... -->
               <span onClick={() => navigate('/category/' + item)} key={index} className="category"> {item} </span> //line word mistake solve
CategoryPage.jsx..


  const param = useParams()
  console.log(param);

  ouput console:
  {catName: 'Newspaper'}
CategoryPage.jsx:14 {catName: 'Book'}

<!-- after runnign we are gettingthe categories byt whole things are showing so changes..
categorypage.jsx 
    const url = "http://localhost:4000/get-products?catName=" + param.catName;
-->


@-@

# Node js
<!-- index.js -->

now in backend to send it...... // used to changeeee
app.get('/get-products', async (req, res) => {
  //const  catName = req.query.catName;
  print in terminal on code//console.log(catName)
  try {
    const products = await Products.find({category:catName});//find insidr chnges
    if (products.length === 0) {
      return res.json({ message: "No products found", products: [] });
    }
    res.json({ message: "Products fetched successfully", products });
  } catch (error) {
    console.error(error);
    res.status(500).json({ message: "Server Error" });
  }
});

now we are getting by calling api the category but one ata a toime so change in frontend in code line likeeee

<!-- React  categoryPage.jsx
   }, [param]); -->

<!-- ///////////////////////////now working on product deatil page show user id and contact wala part///////////////////////////////////////// -->

//./././././././././././/./.././././././././././././/./././././/.///.//////////././././/./././././././././././..
<!-- go to index.js in backenddddd................/ -->

const Products = mongoose.model('Products', {
  pname: String,
  pdesc: String,
  price: String,
  category: String,
  pimg: String,
  addedBy : mongoose.Schema.Types.ObjectId // from user id from local storage ..
});

/addd-product api add two line of code .....

const addedBy = req.body.userId;

    const product = new Products({ pname, pdesc, price, category, pimg , addedBy });

<!-- react-app in frontend add-product.jsx 
add line of cod ......
 -->
import categories from './CategoriesList';

<!-- in fromfdta
        fromData.append('userId', localStorage.getItem('userId'))
 -->

 <!-- after return  :  return(
                                <option key={'option' + index} > {item} </option>
                            ) -->

<!-- after function: 
 const [pimg, setpimg] = useState('');
    const [pimg2, setpimg2] = useState(''); -->

<!-- const handle api:    fromData.append('pimg2', pimg2) -->

<!-- 
from mutliple 2 image in product input and usestae for image two time with name change..
                <label> Product Image 1</label>
                  <input className="form-control" type="file" onChange={(e) => { setpimg(e.target.files[0]) }} />
                <label> Product Image 2 </label>
                <input className="form-control" type="file" onChange={(e) => { setpimg2(e.target.files[0]) }} /> -->


///////setup in backend Tooooo////////
<!-- index.js -->

app.post('/add-product', upload.single('pimg'), async (req, res) => {
  console.log(req.file)
  console.log(req.body)
  return;
  <!-- checking purpose before this we add in two image =abovvwe code.. -->

so dta is taking but not uplod or save in backend so solution for that (server error) while sumbit...............

//////////////////////go on google and search multer multi file upload//////////////////////////////////

[text](https://stackoverflow.com/questions/39350040/uploading-multiple-files-with-multer)🔗

<!-- after these code changes in lines we get in console 
app.post('/add-product', upload.fields([ {name : 'pimg'} , {name : 'pimg2'} ]), async (req, res) => {
  console.log(req.files)
  console.log(req.body)
  return;
 -->

below codde line chnages..
// shows the changesss
app.post('/add-product', upload.fields([ {name : 'pimg'} , {name : 'pimg2'} ]), async (req, res) => {
  //console.log(req.files)
  //console.log(req.body)

  try {
    const { pname, pdesc, price, category } = req.body;
    //const pimg = req.files ? req.files.pimg[0].path : '';
   // const pimg2 = req.files ? req.files.pimg2[0].path : '';
    const addedBy = req.body.userId;

   // const product = new Products({ pname, pdesc, price, category, pimg ,pimg2, addedBy });
    await product.save();

    res.json({ message: 'Product is saved', product });
  } catch (error) {
    console.error(error);
    res.status(500).json({ message: 'Server Error' });
  }
});

<!-- not shwoing home page......... -->

condition on get-products.. to show all product if category come then only its print and category /

 const  catName = req.query.catName;
  let _f = {}

  if (catName){
    _f = { category : catName
     }
  }

  try {
    const products = await Products.find(_f);


/////after this chages we get all home page product category bass we go i detail and check imag 2 atre in networkkk


<!-- go to frontend and change in productDetail.jsx code
{product && <div className="d-flex justify-content-between flex-wrap">
                    <div>
                        <img width="400px" height="200px" src={'http://localhost:4000/' + product.pimg} alt="" />
                        <img width="400px" height="200px" src={'http://localhost:4000/' + product.pimg2} alt="" />
                        <h6>PRODUCT DETAIL:</h6>{product.pdesc}
                    </div>
                    <div> -->

till here weget all product in home page two image addand show side by sideein product deatil... and stup in frotend and backend 


<!-- frotend react -->

@-@

# REact page
<!-- before return -->
<!-- ProductDetail.jsx
  const handleContact = (addedBy) => {
        console.log('id', addedBy)
    }
    return (-->


<!-- after return -->
     <div>
                       // <img width="400px" height="200px" src={'http://localhost:4000/' + product.pimg} alt="" />
                        <img width="400px" height="200px" src={'http://localhost:4000/' + product.pimg2} alt="" />
                       // <h6>PRODUCT DETAIL:</h6>{product.pdesc}
                    </div>
                    <div>
                        <p className="m-2 price-text"> Rs.{product.price} /-</p>
                        <p className='m-2 '>{product.pname} | {product.category} </p>
                        <p className="m-2 text-success">{product.pdesc}</p>

                      //  {product.addedBy &&
                          //  <button onClick={() => handleContact(product.addedBy)}>
                           /     SHOW CONTACT DETAILS
                          /  </button>}
                    </div>]// - chnages in codeee




<!-- after this all we are getting in console of otput
but we now need use detail so for that samefile code changessss.......copy paste above codee -->

 const handleContact = (addedBy) => {
        console.log('id', addedBy)
        const url = "http://localhost:4000/get-user/" + addedBy;
        axios.get(url)
            .then((res) => {
                // if (res.data.user) {
                //     setproduct(res.data.product)
                // }
                
            })
            .catch((err) => {
                alert("server error")
            });
    }

//////now we need api on backend because no api for user so ////////


@-@

# Node js
<!-- index.js -->
app.get('/get-user/:uId', async (req, res) => {
  const _userId = req.params.uId;
  Users.findOne({ _id: _userId })
    .then((result) => {
      res.send({ message: " sucess. ", user: result })
    })
    .catch(() => {
      res.send({ message: " server error in user  " })
    })
})
<!-- call api -->
<!-- now we are getting  all thinks we need username only  -->



@-@

# REact page

<!-- productdetail.jsx

code of line chnagez 
 const [user, setuser] = useState();
    console.log(user,"userrrrrrrr")

.then((res) => {
                if (res.data.user) {
                    setuser(res.data.user)
                }
            })

            <!-- after button -->
              {user && user.username && <h4>{user.username}</h4>} // we get user name 
 -->

<!-- so wehen we want to signup e need to store mobile and gmail  etcc -->
@-@

# Node js
<!-- index.js -->
const Users = mongoose.model('Users', {
  username: String,
  email: String,
  mobile: String,
  password: String,
  likedProducts: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Products' }]
});

app.post('/signup', async (req, res) => {
  try {
    const { username,email,mobile, password } = req.body;
    const user = new Users({ username, email, mobile, password });




@-@

# REact page

signup.jsx
<!-- give classnmae 
  <input className='form-control' type="text" value={username} 
      onChange={(e) => 
      setUsername(e.target.value)
      }/>
      <br />
      PASSWORD
      <input className='form-control' type="password" value={password} 
      onChange={(e) =>
      setPassword(e.target.value)
      }
      /> -->

<!-- errorin mongo so solution go to network acces and  ad ip add current ip and save and confirm so its will never say again again  -->


///////////////now go on add product in output to get all mobilenumber ettccc/////////////////////

@-@

# Node js

go in backed to show phoen number and username email ig go in get-user ///////////
<!-- change in line 
.then((result) => {
      res.send({
        message: " sucess. ",
        user: {
          email: result.email,
          mobile: result.mobile,
          username: result.username
        }
      })
    }) -->

////////////now we gret in console but not shown inn button so go in frontend for tht in product detail

<!-- productDteial.jsx
   </button>}
                            {user && user.username && <h4>{user.username}</h4>}
                            {user && user.email && <h3>{user.email}</h3>}
                            {user && user.mobile && <h6>{user.mobile}</h6>}
 -->

<!-- so what happen previous code funda error not showeing contact detail
changes in codeeeeeeeeeee
                       { product.pimg2 && <img width="400px" height="200px" src={'http://localhost:4000/' + product.pimg2} alt="" />}
 -->

1.23.11 working on login page before that


go to login.jsx 
css changes 


logout from output ..

6-v  /////works to do..
location search that particular location product only shows.......
chnage the add product with sell
and the logout and liked in dropdown okhhh!!

<!-- so work on input in before search....... -->

@-@

# REact page

header.jsx
code in linee chnage 

   {/* Dropdown for selecting a location */}
        <select>
          {locations.map((item, index) => (
            <option value={  `${item.latitude},${item.longitude}` }>
              {item.placeName}
            </option>
          ))}
        </select>
        <!-- after home  -->

/ Define locations outside of handleLogout so it's accessible in JSX
  let locations = [
    {
      'latitude': 28.6139,
      'longitude': 77.2099,
      'placeName': "New Delhi, Delhi"
    },
    {
      'latitude': 19.0760,
      'longitude': 72.8777,
      'placeName': "Mumbai, Maharashtra"
    },
  ];
<!-- in before returnnnnnn -->

<!-- now ork on loacation chnages by user it need to store some where so we store in local storage 
line odf codde chnage  -->
<select value='' onChange={(e) => {
          localStorage.setItem('userLoc', e.target.value)
        }}>

///after this line of code chnages we go and inspect and check we are getting thelocation in application localstorage 

<!-- so we are getting ken	eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.
userId	67cd8f6f0da3f0ac53ef165c	
userLoc	28.6139,77.2099	
 -->

so at add product we add location with infoo....

<!-- GOOOOOOOOOOOOO -->////////////////////
<!-- AddProduct.jsx -->
///////////////////////without telling useer we save ittt........
  const handleApi = () => {

        navigator.geolocation.getCurrentPosition((position) =>{ 
            console.log(position)
        })
<!-- ///after adding this line of codee we get a location navigate after clicking sumbit with a sever errro and okh -->


    const handleApi = () => {

        navigator.geolocation.getCurrentPosition((position) =>{ 
            const fromData = new FormData();
            fromData.append('plat', position.coords.latitude)
            fromData.append('plog', position.coords.longitude)
            fromData.append('pname', pname)
            fromData.append('pdesc', pdesc)
            fromData.append('price', price)
            fromData.append('category', category)
            fromData.append('pimg', pimg)
            fromData.append('pimg2', pimg2)
            fromData.append('userId', localStorage.getItem('userId'))
    
            const url = 'http://localhost:4000/add-product';
            axios.post(url, fromData)
                .then((res) => {
                    console.log(res)
                    if (res.data.message) {
                        alert(res.data.message)
                        navigate('/')
                    }
                })
                .catch((err) => {
                    alert('Server Error')
                })
        })
    }
  
after line of code changes it get an fixing now go to backend and call api


@-@

# Node js
index.js

<!-- in api call of add-product an add a return after 2 consoole to check n node terminal is working or not  
so we get in this i terminal
plat: '19.473476',
  plog: '72.858566',
  pname: '',
  pdesc: '',
  price: '',
  category: '',
  pimg: '',
  pimg2: '',
  userId: '67cd8f6f0da3f0ac53ef165c'
}-->

now we get long and lat from frontend now work on schema,/./././././

we need to addindexing that why we are doing this!!!


let schema = new mongoose.Schema({
  pname: String,
  pdesc: String,
  price: String,
  category: String,
  pimg: String,
  pimg2: String,
  addedBy: mongoose.Schema.Types.ObjectId,
  pLoc :{
    type : {
      type: String,
      enum :['Point'],
      default: 'Point'
    },
    coordinates : {
      type : [Number]
    }
  }

})

schema.index({ pLoc : '2dsphere'}); // four side area scan


app.post('/add-product', upload.fields([{ name: 'pimg' }, { name: 'pimg2' }]), async (req, res) => {
  console.log(req.files)
  console.log(req.body)
  try {
    const { plat,plong,pname, pdesc, price, category } = req.body;
    const pimg = req.files ? req.files.pimg[0].path : '';
    const pimg2 = req.files ? req.files.pimg2[0].path : '';
    const addedBy = req.body.userId;

    const product = new Products({ pname, pdesc, price, category, pimg, pimg2, addedBy, pLoc: { type: 'Point', coordinates: [parseFloat(plong), parseFloat(plat)] } });
    await product.save();

    res.json({ message: 'Product is saved', product });
  } catch (error) {
    console.error(error);
    res.status(500).json({ message: 'Server Error' });
  }
});

<!-- now add a product.... -->

// Add Product API
app.post('/add-product', upload.fields([{ name: 'pimg' }, { name: 'pimg2' }]), async (req, res) => {
  console.log(req.files)
  console.log(req.body)
  const plat = req.body.plat;
  const plog = req.body.plog;
  const pname = req.body.pname;
  const pdesc = req.body.pdesc;
  const price = req.body.price;
  const category = req.body.category;
  const pimg = req.files?.pimg?.[0]?.path || '';
  const pimg2 = req.files?.pimg2?.[0]?.path || '';  
  const addedBy = req.body.userId;

  const product = new Products({ pname, pdesc, price , category, pimg , pimg2 , addedBy, pLoc :{
    type: 'Point', coordinates: [plat,plog]
  } })
  product.save()
     .then(() =>{
       res.send({message : "saved success product."})
     })
     .catch(()=>{
      res.send({message: "server error product."})
     })
});
<!-- above code is after code error solving -->
so at 11.37 we cam eback after afternoon we are no geetti9ng the product AS PER LOCATION SO WE DID a small chmage in frontend

@-@

# REact page

home.jsx

  const handleClick = () => {

    const url = 'http://localhost:4000/search?search=' + search + '&loc=' +localStorage.getItem('userLoc');
    axios.get(url)

<!-- when seach we get it and now i go backend and work n ittt....
 -->

@-@

# Node js

search api
//for search
app.get('/search', (req, res) => {
  console.log(req.query)
  return;

<!-- aftrr this changes in code of line we click on search and check in terminal -->
{ search: '', loc: '28.6139,77.2099' }

<!-- again change return in array -->
app.get('/search', (req, res) => {
  let latitude = req.query.loc.split(',')[0];
  let longitude = req.query.loc.split(',')[1];

  let search = req.query.search;
  Products.find({
    $or: [
      { pname: { $regex: search } },
      { pdesc: { $regex: search } },
      { price: { $regex: search } },
    ],
    pLoc: {
      $near: {
        $geometry: {
          type: 'Point',
          coordinates: [parseFloat(longitude), parseFloat(latitude)]
        }
      }
    }
  })

<!-- after this line of codes chnages we get and good outpu which if present basede on location then shows...
we get: no result found and if we search for latest that we aaded based on location then we get oittt... -->

so above arrow was not chnages why?

@-@

# REact page
header.jsx

<!-- chnage in line of codeee -->

  const [loc , setLoc] = useState(null)

 <select value={loc} onChange={(e) => {
          localStorage.setItem('userLoc', e.target.value)
          setLoc(e.target.value)
        }}>
<!-- after this changes we get an dropdown working staggeeee in output -->

@-@

# Node js

<!-- aswe change dropdown list we get an in inspect of output chnage in useLoc like chnagebale.. -->

<!-- ////// as we see we get on both location hte same product so to change them we chooose do to somethiingg//////// -->
       coordinates: [parseFloat(latitude), parseFloat(longitude)]
        },
        $maxDistance : 500 * 1000,

        <!-- after  these line chnae in index.js we get both diff dropdownnnnn..... -->

@-@

# REact page

header.jsx for cretae a link for sell...
<div style={{
          display: 'flex', justifyContent: 'center',
          alignItems: 'center', background: 'blue',
          width: '40px', height: '40px',
          borderRadius: '49%'
        }}> OM </div>

        {true && <div>

        </div>}
        onclcik we get box
<!-- after add on thi chnage in code we get aaal the like product and inside this  -->
 {true && <div style={{
          width: '200px',
          background: 'blue',
          position : 'absolute',
          top: '0',
          right : '0',
          marginTop : '50px',
          marginRight : '50px'
        }}>

<!--         
1st chahge :
////above :
  const [showOver, setshowOver] = useState(false)

///afer logout button:
{true && <div style={{
          width: '200px',
          background: 'blue',
          position : 'absolute',
          top: '0',
          right : '0',
          marginTop : '50px',
          marginRight : '50px'
        }}>
         
          {!!localStorage.getItem('token') &&
            <Link to="/liked-products">
              <button className='logout-btn'>LIKED PRODUCTS</button>
            </Link>
          }
        </div>}

/////////// set showOver and showOver chnae in code for onclick workiggggg!@!!! 


////below three div group add this inside the circle logo ///

 <div>
            {!!localStorage.getItem('token') &&
              <Link to="/add-product">
                <button className='logout-btn'>ADD PRODUCT</button>
              </Link>
            }
          </div>

          <div>{!!localStorage.getItem('token') &&
            <Link to="/liked-products">
              <button className='logout-btn'>LIKED PRODUCTS</button>
            </Link>}</div>

          <div>{!localStorage.getItem('token') ?
            <Link to='/login'> LOGIN </Link> :
            <button className="logout-btn" onClick={handleLogout}> LOGOUT </button>}</div>
 <div
          onClick={() => {
            setshowOver(!showOver)
          }}
          style={{
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            background: '#002f34',
            color: "#fff",
            fontSize: '14px',
            width: '40px',
            height: '40px',
            borderRadius: '49%'
          }}> OM </div>

        {showOver && <div style={{
          minHeight: '100px',
          width: '200px',
          background: 'blue',
          position: 'absolute',
          top: '0',
          right: '0',
          zIndex: 1,
          marginTop: '50px',
          marginRight: '50px',
          color :'red', 
          fontSize: '14px',
          background : '#002f34',
          borderRadius : '10px'
        }}>

          <div>
            {!!localStorage.getItem('token') &&
              <Link to="/add-product">
                <button className='logout-btn'>ADD PRODUCT</button>
              </Link>
            }
          </div>

          <div>{!!localStorage.getItem('token') &&
            <Link to="/liked-products">
              <button className='logout-btn'>LIKED PRODUCTS</button>
            </Link>}</div>

          <div>{!localStorage.getItem('token') ?
            <Link to='/login'> LOGIN </Link> :
            <button className="logout-btn" onClick={handleLogout}> LOGOUT </button>}</div>

after above huge chnage in code we egt an good ouput in gheader right corner but problrm is if user not login that can aslso liked the product...

-->
<!-- home.jsx: solution -->

let userId = localStorage.getItem('userId');

    if(!userId) {
      alert("Please Login First!! ")
      return;
    }

<!-- header.jsx -->

  <!-- const handleLogout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('userId');

so for checking we first login nd then logout so we are getting......!

                    <div onClick={(e) =>  handleLike(item._id) && e.stopPropagation()} className="icons-conatiner">
to stopproprgation in child

  const handleLike = (productId) => {
    e.stopPropagation();
    let userId = localStorage.getItem('userId');

    if(!userId) {
      alert("Please Login First!! ")
      return; -->


v - 8
<!-- 1. mys ads , 2.user profile, 3.search err,code push , refsctor codeeee// -->

login user use ke product usii koo..... based on user id we doo.....////

<!-- create a myproduct and paste inside that likedproject code... -->

chnage in cod eliek chnage function name and export name 
 and now cretae a api to show in index.js

  {
    path: "/my-products",
    element: (<MyProducts/>),
  },
  after adding this line we get an output but a server because ther ei s no in backend store for work on that in backend
so we created a link to directly react on my product who can show only login user


<!-- go in header.jsx for creating a link for that purpose  -->
<div>{!!localStorage.getItem('token') &&
            <Link to="/liked-products">
              <button className='logout-btn'> FAVOURITES </button>
            </Link>}</div>

          <div>{!!localStorage.getItem('token') &&
            <Link to="/my-products">
              <button className='logout-btn'>MY AD</button>
            </Link>}</div>

after this line of chnage we done our one link added in circle logoooo


<!-- go to backend to create an api -->
@-@

# Node js


//my ads
app.post('/my-products', async (req, res) => {
  const userId = req.body.userId;

  Products.find({ addedBy : userId })
  .then((result) => {
    res.send({message: 'success', products:result})
   })
   .catch((err) =>{
    res.send({message: 'server err in addproduct'})
   })

});
<!-- so we go on frontend and check the working or nnot by refersihningg -->

<!-- if u login or signup with new id then it not shows anny kind of my ads okkhh
 -->
<!-- 11.00 srop here fro now~!!! -->
oh detle

@-@

# REact page


<!-- the problem of categoryPage to based on location getting now? by changing thi sline of code ..!
  const handleClick = () => {

    // const url = 'http://localhost:4000/search?search=' + search;
    const url = 'http://localhost:4000/search?search=' + search + '&loc=' +localStorage.getItem('userLoc');

 -->

next 
<!-- user profile....
 
 //create a userProfilr folder 
 
function MyProfile(){
    return(
        <div>
            <h4>User Profilee</h4>
        </div>
    )
}
export default MyProfile;

and used inside the index.js//
 {
    path: "/my-profile",
    element: (<MyProfile/>),
  },
 -->
// we go and hrck in frotend page about that!?
/my-profile

<!-- normal code chnage 
import Header from "./Header";
function Myprofile(){
    return(
        <div>
            <Header/>
            <h4 className="text-center"// bootstrap class mt-3>User Profilee</h4>
        </div>
    )
}
export default Myprofile; -->


<!-- show what we need call api for user dtaa show?
 -->

<!-- changre to call apii
import { useEffect } from "react";
import Header from "./Header";
import axios from "axios";

function Myprofile() {


    useEffect(() => {
        let url = 'http://localhost:4000/my-profile/' + localStorage.getItem('userId');
        axios.get(url)
            .then((res) => {
                console.log(res.data)
            })
        .catch((err) => {
            alert("server error")
        })
}, []);

return (
    <div>
        <Header />
        <h4 className="text-center mt-2">User Profilee</h4>
    </div>
)
}
export default Myprofile; -->

servere errro becasue my profilre api is not iin backendd....

@-@

# Node js

app.get('/my-profile/:userId' , (req,res) =>{
  console.log(req.params);
  return;
})
<!-- add this line w get knoem n node terminal ki its working or not?1 -->

Server running on port 4000
MongoDB Connected
{ userId: '67cd8f6f0da3f0ac53ef165c' } we get ittt...

app.get('/my-profile/:userId' , (req,res) =>{
  let uid = req.params.userId

  Users.findOne({ _id : uid })
  .then((result) => {
    res.send({
      message: " sucess. ",
      user: {
        email: result.email,
        mobile: result.mobile,
        username: result.username
      }
    })
  })
  .catch(() => {
    res.send({ message: " server error in user  " })
  })
})
network
output:{message: " sucess. ", user: {email: "omn@gmail.com", mobile: "01234567891", username: "omii"}}
message
: 
" sucess. "
user
: 
{email: "omn@gmail.com", mobile: "01234567891", username: "omii"}
console:{message: ' sucess. ', user: {…}}message: " sucess. "user: {email: 'omn@gmail.com', mobile: '01234567891', username: 'omii'}[[Prototype]]: Object


@-@

# REact page

import { useEffect, useState } from "react";
import Header from "./Header";
import axios from "axios";

function Myprofile() {

    const [user, setuser] = useState({})
    useEffect(() => {
        let url = 'http://localhost:4000/my-profile/' + localStorage.getItem('userId');
        axios.get(url)
            .then((res) => {
                console.log(res.data)
                if (res.data.user) {
                    setuser(res.data.user);
                }
            })
            .catch((err) => {
                alert("server error")
            })
    }, []);

    return (
        <div>
            <Header />
            <h4 className="text-center mt-2">User Profilee</h4>
            <table>
                <tr>
                    <td> USERNAME </td>
                    <td> EMAIL ID </td>
                    <td> MOBILE </td>
                </tr>
                <tr>
                    <td>{user.username}</td>
                    <td>{user.email}</td>
                    <td> {user.mobile} </td>
                </tr>

            </table>
        </div>
    )
}
export default Myprofile;
<!-- after that we are getting user page.. -->

<!-- for styling we go to bootstrap tBLE IN SEARCH BAR..... -->

<!-- push it  -->

@-@

# Node js
<!-- refactor code
 controllers folder create
 inside that  userController.js & productController.js


 productController.js
 
const mongoose = require('mongoose');

let schema = new mongoose.Schema({
    pname: String,
    pdesc: String,
    price: String,
    category: String,
    pimg: String,
    pimg2: String,
    addedBy: mongoose.Schema.Types.ObjectId,
    pLoc: {
        type: {
            type: String,
            enum: ['Point'],
            default: 'Point'
        },
        coordinates: {
            type: [Number]
        }
    }

})

schema.index({ pLoc: '2dsphere' }); // four side area scan

const Products = mongoose.model('Products', schema);

module.exports.search = (req, res) => {
    let latitude = req.query.loc.split(',')[0];
    let longitude = req.query.loc.split(',')[1];

    let search = req.query.search;
    Products.find({
        $or: [
            { pname: { $regex: search } },
            { pdesc: { $regex: search } },
            { price: { $regex: search } },
        ],
        pLoc: {
            $near: {
                $geometry: {
                    type: 'Point',
                    coordinates: [parseFloat(latitude), parseFloat(longitude)]
                },
                $maxDistance: 500 * 1000,
            }
        }
    })
        .then((results) => {
            res.send({ message: 'success', product: results })
        })
        .catch((err) => {
            res.send({ message: ' server error in search ' })
        })
}

module.exports.addProduct = async (req, res) => {
    console.log(req.files)
    console.log(req.body)
    const plat = req.body.plat;
    const plog = req.body.plog;
    const pname = req.body.pname;
    const pdesc = req.body.pdesc;
    const price = req.body.price;
    const category = req.body.category;
    const pimg = req.files?.pimg?.[0]?.path || '';
    const pimg2 = req.files?.pimg2?.[0]?.path || '';
    const addedBy = req.body.userId;

    const product = new Products({
        pname, pdesc, price, category, pimg, pimg2, addedBy, pLoc: {
            type: 'Point', coordinates: [plat, plog]
        }
    })
    product.save()
        .then(() => {
            res.send({ message: "saved success product." })
        })
        .catch(() => {
            res.send({ message: "server error product." })
        })
}

module.exports.getProducts = async (req, res) => {
    const catName = req.query.catName;
    let _f = {}

    if (catName) {
        _f = {
            category: catName
        }
    }

    try {
        const products = await Products.find(_f);
        if (products.length === 0) {
            return res.json({ message: "No products found", products: [] });
        }
        res.json({ message: "Products fetched successfully", products });
    } catch (error) {
        console.error(error);
        res.status(500).json({ message: "Server Error" });
    }
}

module.exports.getProductsById = async (req, res) => {
    try {
        const product = await Products.findById(req.params.pId);
        if (!product) {
            return res.status(404).json({ message: "Product not found" });
        }
        res.json({ message: "Product found", product });
    } catch (error) {
        console.error(error);
        res.status(500).json({ message: "Server Error" });
    }
}

module.exports.myProducts = async (req, res) => {
    const userId = req.body.userId;

    Products.find({ addedBy: userId })
        .then((result) => {
            res.send({ message: 'success', products: result })
        })
        .catch((err) => {
            res.send({ message: 'server err in addproduct' })
        })

}
usercontroller 

const mongoose = require('mongoose');
const jwt = require('jsonwebtoken');

// Mongoose Models
const Users = mongoose.model('Users', {
    username: String,
    email: String,
    mobile: String,
    password: String,
    likedProducts: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Products' }]
});

module.exports.likedProducts = (req, res) => {
        let productId = req.body.productId;
        let userId = req.body.userId;
    
        Users.updateOne({ _id: userId }, { $addToSet: { likedProducts: productId } })
            .then(() => {
                res.send({ message: 'liked success.' })
            })
            .catch(() => {
                res.send({ message: 'server err' })
            })
    
    }
    

module.exports.signup = async (req, res) => {
    try {
        const { username, email, mobile, password } = req.body;
        const user = new Users({ username, email, mobile, password });

        await user.save();
        res.json({ message: 'User created' });
    } catch (error) {
        console.error(error);
        res.status(500).json({ message: 'Server Error' });
    }
}

module.exports.myProfileById = (req, res) => {
    let uid = req.params.userId

    Users.findOne({ _id: uid })
        .then((result) => {
            res.send({
                message: " sucess. ",
                user: {
                    email: result.email,
                    mobile: result.mobile,
                    username: result.username
                }
            })
        })
        .catch(() => {
            res.send({ message: " server error in user  " })
        })
}

module.exports.getUserById = async (req, res) => {
    const _userId = req.params.uId;
    Users.findOne({ _id: _userId })
        .then((result) => {
            res.send({
                message: " sucess. ",
                user: {
                    email: result.email,
                    mobile: result.mobile,
                    username: result.username
                }
            })
        })
        .catch(() => {
            res.send({ message: " server error in user  " })
        })
}

module.exports.login = async (req, res) => {
    try {
        const { username, password } = req.body;
        const user = await Users.findOne({ username });

        if (!user) {
            return res.json({ message: 'User not found' });
        }

        if (user.password !== password) {
            return res.json({ message: 'Password not matched' });
        }

        const token = jwt.sign({ data: user }, 'MYKEY', { expiresIn: '1h' });
        res.json({ message: 'User found', token, userId: user._id });
    } catch (error) {
        console.error(error);
        res.status(500).json({ message: 'Server Error' });
    }
}

module.exports.likedProducts = (req, res) => {

    Users.findOne({ _id: req.body.userId }).populate('likedProducts')
        .then((result) => {
            res.send({ message: 'success', products: result.likedProducts })
        })
        .catch((err) => {
            res.send({ message: 'server err' })
        })

}

index,js

const express = require('express');
const path = require('path');
const cors = require('cors');
const jwt = require('jsonwebtoken');
const multer = require('multer');
const productController = require('./controllers/productController');
const userController = require('./controllers/userController');
const mongoose = require('mongoose');
const bodyParser = require('body-parser');
const { type } = require('os');

const app = express();
const port = 4000;

// Middleware
app.use('/uploads', express.static(path.join(__dirname, 'uploads')));
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: false }));
app.use(cors());

// Database Connection
mongoose.connect('mongodb+srv://omssn21:om212006@cluster0.vr8ns.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0')
  .then(() => {
    console.log('MongoDB Connected');
  })
  .catch(err => {
    console.error('MongoDB connection error:', err);
  });

// Storage Configuration for File Upload
const storage = multer.diskStorage({
  destination: function (req, file, cb) {
    cb(null, 'uploads');
  },
  filename: function (req, file, cb) {
    const fileExtension = file.originalname.split('.').pop();
    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);
    cb(null, file.fieldname + '-' + uniqueSuffix + '.' + fileExtension);
  },
});
const upload = multer({ storage: storage });

// API Routes
app.get('/', (req, res) => {
  res.send('Hello Coder.....🌐');
});

//for search
app.get('/search', productController.search);

// Liked Products API
app.post('/liked-product', userController.likedProducts);

// Add Product API
app.post('/add-product', upload.fields([{ name: 'pimg' }, { name: 'pimg2' }]), productController.addProduct);

// Get All Products API
app.get('/get-products', productController.getProducts);

// Get Product by ID
app.get('/get-product/:pId', productController.getProductsById);

// Get Liked Products API
app.post('/liked-products', userController.likedProducts);

//my ads
app.post('/my-products', productController.myProducts);

// Signup API
app.post('/signup', userController.signup);

//getprofile by id api
app.get('/my-profile/:userId', userController.myProfileById)

//get user api
app.get('/get-user/:uId', userController.getUserById)

// Login API
app.post('/login', userController.login);

// Start Server
app.listen(port, () => {
  console.log(`Server running on port ${port}`);
});

 -->

 👍👍👍👍👍👍👍
 adtrer all god changes we get an good workibg output

 <!-- 9 v about dploy based ig -->

we used render for deploy from backeend
    
steps to folloe: 
web service 
[text](https://dashboard.render.com/)
inside process is usd frree and connect git and gicv comand deploy we service / first select web service 

<!-- and after deploy you gte an error so solve that we need add line inside a package.json -->



  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node index.js",
    "dev": "nodemon index.js",
    "build" :"npm run build"//afdd this

and push teh cde on git 

<!-- and go thatpage again and rsatrt noooo click deploy latest commit -->
<!-- new web service selsct -->





netlify used from frontrnd
steps : https://www.netlify.com/

<!-- frtend run on bases of bacekdn so api in constant is imp -->

API_URL = 'htttp://localhost:4000'

export default API_URL;
<!-- after that creating constant we can use it now in code  -->


so after long time to do it deploy process t we notr propably deploy so we install in render site and then pass so go in seting of project send..

 <!-- npm install && npm run build write this changes fbefor buildd.. -->

now work on react buold wqe create env folder for that 

env: REACT_APP_BASE_URL = 'https://localhost:4000'
constant : 
const API_URL = process.env.REACT_APP_BASE_URL 
console.log(API_URL, "API_URL");

export default API_URL;
<!-- <!-- first we get an weooor so fix that we did it to env chnage in code and try to coonsole it becauseto check now we are running on which localhost so for you  need to just specific some thinkkkk  restrt the react serve again-->


so n render we get an errro again for that wehat we did w ego in setting an npm install only remove npm build 
==> Uploaded in 5.5s. Compression took 5.2s
==> Build successful 🎉
==> Deploying...
[text](https://eco-bazar-node.onrender.com) we get it on our projct url okhh..

now we add / and ask rom getproducts
https://eco-bazar-node.onrender.com/get-products

<!-- .code frontend  -->
const API_URL = process.env.REACT_APP_BASE_URL 
console.log(process.env, "API_URL");

export default API_URL;

<!-- we get this after change in constant code  -->
{NODE_ENV: 'development', PUBLIC_URL: '', WDS_SOCKET_HOST: undefined, WDS_SOCKET_PATH: undefined, WDS_SOCKET_PORT: undefined, …} 'API_URL'



 API_URL = process.env.NODE_ENV != 'development' ?
    process.env.REACT_APP_BASE_URL :
    'http://localhost:4000'
 this changes is for making the code it good and they get by two side in env side or the localhost side..

<!-- nxtttttttttttttt -->

<!-- now simple process now the netfiy need a build older so for that what we do simple install build folder bu runinng this commnd on terimnal -->

<!-- npm run build // so we get inside the react folder a build folder...... -->

The build folder is ready to be deployed.
You may serve it with a static server:

  npm install -g serve
  serve -s build

Find out more about deployment here:

  https://cra.link/deployment


now copy build folder and paset in netify upload filee




after lotsof play we gtan must output link

https://joyful-salmiakki-d7b692.netlify.app/category/Book






if dont get  in output so simple render go and restart service  



succesfully both ar deploy bass abhi bri changes in liked and deslikee

so many fixing errro we are solved because baceknd with same m=nmae get confuse so simple i cgnage by ai get hint me and i try to chnage 
app.post('/liked-product', userController.likedProduct);


@-@

# REact page


<!-- after creating a dislike and gandel create api on backend and lets sewe what happenn -->
import { useEffect, useState } from 'react';
import Header from './Header';
import Categories from './Categories';
import { useNavigate, Link, data, useParams } from 'react-router-dom';
import axios from 'axios';
import { FaHeart } from 'react-icons/fa';
import './Home.css';
import API_URL from '../constants';

function CategoryPage() {

  const navigate = useNavigate()

  const param = useParams()
  console.log(param);

  //creating stae for products
  const [products, setproducts] = useState([]);
  const [likedproducts, setlikedproducts] = useState([]);
  const [refresh, setrefresh] = useState(false);
  console.log(likedproducts)
  const [cproducts, setcproducts] = useState([]);
  const [search, setsearch] = useState("");
  const [issearch, setissearch] = useState(false);

  // for not acces home page without login thi useeffrct is used..
  // useEffect(() => {
  //   if (!localStorage.getItem('token')) {
  //     navigate('/login')
  //   }
  // }, [])
  useEffect(() => {
    const url = API_URL + "/get-products?catName=" + param.catName;
    axios
      .get(url)
      .then((res) => {
        if (res.data.products) {
          setproducts(res.data.products);
        }
      })
      .catch((err) => {
        alert("server error")
      });

    const url2 = API_URL + "/liked-products";
    let data = { userId: localStorage.getItem('userId') };

    axios.post(url2, data)
      .then((res) => {
        if (res.data.products) {
          setlikedproducts(res.data.products);
        }
      })
      .catch((err) => {
        alert("server error")
      });

  }, [param, refresh]);

  const handlesearch = (value) => {
    setsearch(value);
  }
  const handleClick = () => {

    // const url = 'http://localhost:4000/search?search=' + search;
    const url = API_URL + '/search?search=' + search + '&loc=' + localStorage.getItem('userLoc');

    axios.get(url)
      .then((res) => {
        setcproducts(res.data.product);
        setissearch(true);
      })
      .catch((err) => {
        alert("server error")
      });

    // let filteredProducts = products.filter((item) => {
    //   if (item.pname.toLowerCase().includes(search.toLowerCase()) ||
    //     item.pdesc.toLowerCase().includes(search.toLowerCase()) ||
    //     item.category.toLowerCase().includes(search.toLowerCase())) {
    //     return item;
    //   }
    // })
    // setcproducts(filteredProducts)


  }

  const handleCategory = (value) => {
    let filteredProducts = products.filter((item, index) => {
      if (item.category == value) {
        return item;
      }
    })
    setcproducts(filteredProducts)
  }

  const handleLike = (productId, e) => {
    e.stopPropagation();
    let userId = localStorage.getItem('userId');
    const url = API_URL + "/liked-product";
    const data = { userId, productId }
    axios.post(url, data)
      .then((res) => {
        if (res.data.message) {
          // alert('Liked')
          setrefresh(!refresh)
        }
      })
      .catch((err) => {
        alert("server error")
      });
  }

  const handleDisLike = (productId, e) => {
    let userId = localStorage.getItem('userId');
    e.stopPropagation();

    if (!userId) {
      alert("Please Login First!! ")
      return;
    }
    const url = API_URL + "/disliked-product";
    const data = { userId, productId }
    axios.post(url, data)
      .then((res) => {
        if (res.data.message) {
          // alert('DisLiked')
          setrefresh(!refresh)


        }
      })
      .catch((err) => {
        alert("server error")
      });

  }

  const handelProduct = (id) => {
    navigate('/product/' + id)
  }
  return (
    <div>
      <Header search={search} handlesearch={handlesearch} handleClick={handleClick} />
      <Categories handleCategory={handleCategory} />

      {issearch && cproducts && <
        h5>SEARCH RESULT :
        <button className="clear-btn" onClick={() => setissearch(false)}> CLEAR </button>
      </h5>}
      {issearch && cproducts && cproducts.length == 0 && <h5> No Result found......... </h5>}

      {issearch && (
        <>
          <div className='d-flex justify-content-center flex-wrap'>
            {cproducts && products.length > 0 &&
              cproducts.map((item, index) => {
                return (
                  <div key={item._id} className="card m-3" >
                    <div onClick={() => handleLike(item._id)} className="icons-conatiner">
                      <FaHeart className='icons' />
                    </div>
                    <img width="500px" height="200px" src={API_URL + '/' + item.pimg} />
                    <p className='m-2 '>{item.pname} | {item.category} </p>
                    <p className="m-2 text-danger">{item.price}</p>
                    <p className="m-2 text-success">{item.pdesc}</p>
                  </div>
                )
              })}
          </div>
        </>
      )}

      {!issearch && <div className='d-flex justify-content-center flex-wrap'>
        {products && products.length > 0 &&
          products.map((item, index) => {
            return (
              <div onClick={() => { handelProduct(item._id) }} key={item._id} className="card m-3" >
                <div onClick={() => handleLike(item._id)} className="icons-conatiner">
                  {
                    likedproducts.find((likedItem) => likedItem._id == item._id) ?
                      <FaHeart onClick={(e) => handleDisLike(item._id, e)} className='red-icons' /> :
                      <FaHeart onClick={(e) => handleLike(item._id, e)} className='icons' />

                  }
                </div>
                <img width="300px" height="200px" src={API_URL + '/' + item.pimg} />
                <p className="m-2 price-text"> Rs.{item.price} /-</p>
                <p className='m-2 '>{item.pname} | {item.category} </p>
                <p className="m-2 text-success">{item.pdesc}</p>
              </div>
            )
          })}
      </div>}
    </div>
  );
}
export default CategoryPage;    
<!-- categorypage code above chnage in like disslike and simple show ioutput -->


import { useEffect, useState } from 'react';
import Header from './Header';
import Categories from './Categories';
import { useNavigate, Link, data } from 'react-router-dom';
import axios from 'axios';
import { FaHeart } from 'react-icons/fa';
import './Home.css'
import API_URL from "../constants";


function Home() {

  const navigate = useNavigate()

  //creating stae for products
  const [products, setproducts] = useState([]);
  const [likedproducts, setlikedproducts] = useState([]);
  const [refresh, setrefresh] = useState(false);
  console.log(likedproducts)
  const [cproducts, setcproducts] = useState([]);
  const [search, setsearch] = useState("");
  const [issearch, setissearch] = useState(false);

  // for not acces home page without login thi useeffrct is used..
  // useEffect(() => {
  //   if (!localStorage.getItem('token')) {
  //     navigate('/login')
  //   }
  // }, [])
  useEffect(() => {
    const url = API_URL + "/get-products";
    axios
      .get(url)
      .then((res) => {
        if (res.data.products) {
          setproducts(res.data.products);
        }
      })
      .catch((err) => {
        alert("server error")
      });

    const url2 = API_URL + "/liked-products";
    let data = { userId: localStorage.getItem('userId') };

    axios.post(url2, data)
      .then((res) => {
        if (res.data.products) {
          setlikedproducts(res.data.products);
        }
      })
      .catch((err) => {
        alert("server error")
      });
  }, [refresh]);

  const handlesearch = (value) => {
    setsearch(value);
  }
  const handleClick = () => {

    const url = API_URL + '/search?search=' + search + '&loc=' + localStorage.getItem('userLoc');
    axios.get(url)
      .then((res) => {
        setcproducts(res.data.product);
        setissearch(true);
      })
      .catch((err) => {
        alert("server error")
      });

    // let filteredProducts = products.filter((item) => {
    //   if (item.pname.toLowerCase().includes(search.toLowerCase()) ||
    //     item.pdesc.toLowerCase().includes(search.toLowerCase()) ||
    //     item.category.toLowerCase().includes(search.toLowerCase())) {
    //     return item;
    //   }
    // })
    // setcproducts(filteredProducts)


  }

  const handleCategory = (value) => {
    let filteredProducts = products.filter((item, index) => {
      if (item.category == value) {
        return item;
      }
    })
    setcproducts(filteredProducts)
  }

  const handleLike = (productId, e) => {
    let userId = localStorage.getItem('userId');
    e.stopPropagation();

    if (!userId) {
      alert("Please Login First!! ")
      return;
    }
    const url = API_URL + "/liked-product";
    const data = { userId, productId }
    axios.post(url, data)
      .then((res) => {
        if (res.data.message) {
          // alert('Liked')
          setrefresh(!refresh)


        }
      })
      .catch((err) => {
        alert("server error")
      });

  }

  const handleDisLike = (productId, e) => {
    let userId = localStorage.getItem('userId');
    e.stopPropagation();

    if (!userId) {
      alert("Please Login First!! ")
      return;
    }
    const url = API_URL + "/disliked-product";
    const data = { userId, productId }
    axios.post(url, data)
      .then((res) => {
        if (res.data.message) {
          // alert('DisLiked')
          setrefresh(!refresh)
        }
      })
      .catch((err) => {
        alert("server error")
      });

  }

  const handelProduct = (id) => {
    navigate('/product/' + id)
  }
  return (
    <div>
      <Header search={search} handlesearch={handlesearch} handleClick={handleClick} />
      <Categories handleCategory={handleCategory} />

      {issearch && cproducts && <
        h5>SEARCH RESULT :
        <button className="clear-btn" onClick={() => setissearch(false)}> CLEAR </button>
      </h5>}
      {issearch && cproducts && cproducts.length == 0 && <h5> No Result found......... </h5>}

      {issearch && (
        <>
          <div className='d-flex justify-content-center flex-wrap'>
            {cproducts && products.length > 0 &&
              cproducts.map((item, index) => {
                return (
                  <div key={item._id} className="card m-3" >
                    <div onClick={(e) => handleLike(item._id, e)} className="icons-conatiner">
                      <FaHeart className='icons' />
                    </div>
                    <img width="500px" height="200px" src={API_URL + '/' + item.pimg} />
                    <p className='m-2 '>{item.pname} | {item.category} </p>
                    <p className="m-2 text-danger">{item.price}</p>
                    <p className="m-2 text-success">{item.pdesc}</p>
                  </div>
                )
              })}
          </div>
        </>
      )}

      {!issearch && <div className='d-flex justify-content-center flex-wrap'>
        {products && products.length > 0 &&
          products.map((item, index) => {
            return (
              <div onClick={() => { handelProduct(item._id) }} key={item._id} className="card m-3" >
                <div className="icons-conatiner">
                  {
                    likedproducts.find((likedItem) => likedItem._id == item._id) ?
                      <FaHeart onClick={(e) => handleDisLike(item._id, e)} className='red-icons' /> :
                      <FaHeart onClick={(e) => handleLike(item._id, e)} className='icons' />

                  }
                </div>
                <img width="300px" height="200px" src={API_URL + '/' + item.pimg} />
                <p className="m-2 price-text"> Rs.{item.price} /-</p>
                <p className='m-2 '>{item.pname} | {item.category} </p>
                <p className="m-2 text-success">{item.pdesc}</p>
              </div>
            )
          })}
      </div>}
    </div>
  );
}
export default Home;    
<!-- abve code on like product and dislike in hme page and ad i css some cool ad=nd smal hetici code solve -->



<!-- next curd opeartion with the user data add plh in secong last videoo... -->

                                <button onClick={() => handleDel(item._id)}> DELETE PRODUCT  </button>
<!-- add this line in myproduct and just for checking ig we add  a console with const handledel -->

before adding return we get this ...
  const handleDel = (pid) => {
        console.log(pid)

    }

omn click on button w get id as console in output inspect 
<!--/// 67cd905d0da3f0ac53ef1660/// -->


 const handleDel = (pid) => {
        console.log(pid)
        if (!localStorage.getItem('userId')) {  // if user is not logged in
            alert('Please login to delete product')
            return;
        }
        const url = API_URL + "/delete-product";
        const data = {
            pid,
            userId: localStorage.getItem('userId')
        }
        axios.post(url, data)
            .then((res) => {
                if (res.data.message) {
                    alert('Product Deleted')
                    navigate('/my-products')
                }
            })
            .catch((err) => {
                alert("server error")
            });

    }
    after addding this if  i go i on backend to check what haapen then it show errro when i click on delete the product beecaause api is not call in backend fro that first i need to call in backend 

@-@

# Node js
ajao boss bgu yaaa!!

module.exports.deleteProducts = async (req, res) => {
   
    console.log(req.body);
    return;
}
<!-- check it run in console in networkkkkkk/payload. and in console of vscode ... -->


module.exports.deleteProducts = async (req, res) => {

    console.log(req.body);
    // return;
    Products.findOne({ _id: req.body.pid })
        .then((result)=>{
            if(result.addedBy == req.body.userId){
                Products.deleteOne({_id: req.body.pid})
                .then((deleteResult) => {
                    console.log(deleteResult)
                })
            }
        })
        .catch((err)=>{ 
            console.log('seerver err in delete product');
        })
}

after click on detete

{ acknowledged: true, deletedCount: 1 }

now working but refersh state need to dd in fonted after deletee the product okhh.....





@-@

# REact page

myproduct.jsx
import { useEffect, useState } from 'react';
import Header from './Header';
import Categories from './Categories';
import { useNavigate, Link, data } from 'react-router-dom';
import axios from 'axios';
import { FaHeart } from 'react-icons/fa';
import './Home.css'
import API_URL from "../constants";

function MyProducts() {

    const navigate = useNavigate()

    //creating stae for products
    const [products, setproducts] = useState([]);
    const [cproducts, setcproducts] = useState([]);
    const [search, setsearch] = useState("");
    const [refresh, setrefresh] = useState(false);

    // for not acces home page without login thi useeffrct is used..
    // useEffect(() => {
    //   if (!localStorage.getItem('token')) {
    //     navigate('/login')
    //   }
    // }, [])
    useEffect(() => {
        const url = API_URL + "/my-products";
        let data = { userId: localStorage.getItem('userId') };
        axios.post(url, data)
            .then((res) => {
                if (res.data.products) {
                    setproducts(res.data.products);
                }
            })
            .catch((err) => {
                alert("server error")
            });
    }, [refresh]);

    const handlesearch = (value) => {
        setsearch(value);
    }
    const handleClick = () => {
        let filteredProducts = products.filter((item) => {
            if (item.pname.toLowerCase().includes(search.toLowerCase()) ||
                item.pdesc.toLowerCase().includes(search.toLowerCase()) ||
                item.category.toLowerCase().includes(search.toLowerCase())) {
                return item;
            }
        })
        setcproducts(filteredProducts)
    }

    const handleCategory = (value) => {
        let filteredProducts = products.filter((item, index) => {
            if (item.category == value) {
                return item;
            }
        })
        setcproducts(filteredProducts)
    }

    const handleLike = (productId) => {
        let userId = localStorage.getItem('userId');
        const url = API_URL + "/liked-product";
        const data = { userId, productId }
        axios.post(url, data)
            .then((res) => {
                if (res.data.message) {
                    alert('Liked')
                }
            })
            .catch((err) => {
                alert("server error")
            });

    }

    const handleDel = (pid) => {
        console.log(pid)
        if (!localStorage.getItem('userId')) {  // if user is not logged in
            alert('Please login to delete product')
            return;
        }
        const url = API_URL + "/delete-product";
        const data = {
            pid,
            userId: localStorage.getItem('userId')
        }
        axios.post(url, data)
            .then((res) => {
                if (res.data.message) {
                    alert('Product Deleted')
                    setrefresh(!refresh)    // to refresh the page
                }
            })
            .catch((err) => {
                alert("server error")
            });

    }
    return (
        <div>
            <Header search={search} handlesearch={handlesearch} handleClick={handleClick} />
            <Categories handleCategory={handleCategory} />


            <div className='d-flex justify-content-center flex-wrap'>
                {cproducts && products.length > 0 &&
                    cproducts.map((item, index) => {
                        return (
                            <div key={item._id} className="card m-3" >
                                <div onClick={() => handleLike(item._id)} className="icons-conatiner">
                                    <FaHeart className='icons' />
                                </div>
                                <img width="500px" height="200px" src={API_URL + item.pimg} />
                                <p className='m-2 '>{item.pname} | {item.category} </p>
                                <p className="m-2 text-danger">{item.price}</p>
                                <p className="m-2 text-success">{item.pdesc}</p>
                            </div>
                        )
                    })}
            </div>
            <h5>ALL RESULTS : </h5>

            <div className='d-flex justify-content-center flex-wrap'>
                {products && products.length > 0 &&
                    products.map((item, index) => {
                        return (
                            <div key={item._id} className="card m-3" >
                                <div onClick={() => handleLike(item._id)} className="icons-conatiner">
                                    <FaHeart className='icons' />
                                </div>
                                <img width="500px" height="200px" src={API_URL + '/' + item.pimg} />
                                <p className='m-2 '>{item.pname} | {item.category} </p>
                                <p className="m-2 text-danger">{item.price}</p>
                                <p className="m-2 text-success">{item.pdesc}</p>
                                <button onClick={() => handleDel(item._id)}> DELETE PRODUCT  </button>
                            </div>
                        )
                    })}
            </div>
        </div>
    );
}
export default MyProducts;    

<!-- simple done with this wee ad staate inside this and cons delete add button in bottom -->

<!-- now editProduct folder createe inside compnentsd -->
copy paste addproduct content inside editProduct


after small chnges in function and export name with file name in addproduct create a link to change the code befoore delete button

 <p className="m-2 text-success">
                                    <Link to={`/edit/${item._id}`}> EDIT PRODUCT </Link>
                                </p>

so simple this to create a link in outside page 
now creat a url for edit-product okhh

in frontend index.js
after adding and importing we get proper output noew cd chnaes for edit productttt

@-@

# Node js


now come in backend to createaaapi for backend to edit productt okh index.js
after some checking 


<!-- again in frontend some coode coopy from productdetail.jsx page for used in editproduct.jsx 
useeffect code ehere we used getproduct 
    const p = useParams();

     useEffect(() => {
        const url = API_URL + "/get-product/" + p.productId;
        axios.get(url)
            .then((res) => {
                if (res.data.product) {
                    setproduct(res.data.product)
                }
            })
            .catch((err) => {
                alert("server error")
            });
    }, []);
this abovre code copy paste insid the editproduct.jsx in imprt after link add useParams

editProduct clcik on link no we get like the output in inspect console 
{pid: '67dbe7e8443a3ce0de303401'}pid: "67dbe7e8443a3ce0de303401"[[Prototype]]: Object

we get by the index.js name after url of editproduct pid or eid that return inisde hat okh.


import { useEffect, useState } from 'react';
import Header from './Header';
import { useNavigate, Link, useParams } from 'react-router-dom';
import axios from 'axios';
import categories from './CategoriesList';
import API_URL from '../constants';
function EditProduct() {

    const p = useParams();
    const navigate = useNavigate();
    const [pname, setpname] = useState('');
    const [pdesc, setpdesc] = useState('');
    const [price, setprize] = useState('');
    const [category, setcategory] = useState('');
    const [pimg, setpimg] = useState('');
    const [pimg2, setpimg2] = useState('');
    const [poldpimg, setpoldpimg] = useState('');
    const [poldpimg2, setpoldpimg2] = useState('');

    useEffect(() => {
        if (!localStorage.getItem('token')) {
            navigate('/login')
        }
    }, []);

    useEffect(() => {
        const url = API_URL + "/get-product/" + p.productId;
        axios.get(url)
            .then((res) => {
                if (res.data.product) {
                    console.log(res.data.product)
                    let product = res.data.product;
                    setpname(product.pname)
                    setpdesc(product.pdesc)
                    setprize(product.price)
                    setcategory(product.category)
                    setpoldpimg(product.pimg)
                    setpoldpimg2(product.pimg2)

                }
            })
            .catch((err) => {
                alert("server error")
            });
    }, []);

    const handleApi = () => {

        navigator.geolocation.getCurrentPosition((position) => {
            const fromData = new FormData();
            fromData.append('pname', pname)
            fromData.append('pdesc', pdesc)
            fromData.append('price', price)
            fromData.append('category', category)
            fromData.append('pimg', pimg)
            fromData.append('pimg2', pimg2)
            fromData.append('userId', localStorage.getItem('userId'))

            const url = API_URL + '/edit-product';
            axios.post(url, fromData)
                .then((res) => {
                    console.log(res)
                    if (res.data.message) {
                        alert(res.data.message)
                        navigate('/')
                    }
                })
                .catch((err) => {
                    alert('Server Error')
                })
        })
    }
    return (
        <div>
            <Header />
            <div className='p-3'>

                <h2>EDIT PRODUCT HERE :</h2>
                <label> Product Name</label>
                <input className="form-control" type="text" value={pname} onChange={(e) => { setpname(e.target.value) }} />
                <label> Product Description </label>
                <input className="form-control" type="text" value={pdesc} onChange={(e) => { setpdesc(e.target.value) }} />
                <label> Product Prize </label>
                <input className="form-control" type="text" value={price} onChange={(e) => { setprize(e.target.value) }} />
                <label> Product Category </label>
                <input className="form-control" type="text" value={category} onChange={(e) => { setcategory(e.target.value) }} />
                <select className="form-control" value={category} onChange={(e) => { setcategory(e.target.value) }}>
                    <option> Book</option>
                    <option> Newspaper </option>
                    <option> Bottle </option>
                    <option> Bucket</option>
                    <option> Clothes </option>
                    {
                        categories && categories.length > 0 &&
                        categories.map((item, index) => {
                            return (
                                <option key={'option' + index} > {item} </option>
                            )
                        })
                    }
                </select>

                <label> Product Image </label>
                <input style={{ width: '50%' }} className="form-control" type="file"
                    onChange={(e) => {
                        setpimg(e.target.files[0])
                    }} />
                <img src={API_URL + '/' + poldpimg} width={100} height={100} />
                <br /> <br />

                <label> Product Second Image </label>
                <input style={{ width: '50%' }} className="form-control" type="file"
                    onChange={(e) => {
                        setpimg2(e.target.files[0])
                    }} />
                    <img src={API_URL + '/' + poldpimg2} width={100} height={100} />
                <br /> <br />

                <button onClick={handleApi} className="btn btn-primary mt-3"> Sumbit </button>
            </div>
        </div>
    );
}
export default EditProduct;    
above cod chage in api and add some image chnages to edit and cool go on and now call api in bacekdndso long waiting for thuis!!!



-->

index.js backend

after making simalr used of ad roduct api and call it and now exporting module and just check it out and 
module.exports.editProduct = async (req, res) => {
    console.log(req.files)
    console.log(req.body)

    return;
    const plat = req.body.plat;
    const plog = req.body.plog;
    const pname = req.body.pname;
    const pdesc = req.body.pdesc;
    const price = req.body.price;
    const category = req.body.category;
    const pimg = req.files?.pimg?.[0]?.path || '';
    const pimg2 = req.files?.pimg2?.[0]?.path || '';
    const addedBy = req.body.userId;

    const product = new Products({
        pname, pdesc, price, category, pimg, pimg2, addedBy, pLoc: {
            type: 'Point', coordinates: [plat, plog]
        }
    })
    product.save()
        .then(() => {
            res.send({ message: "saved success product." })
        })
        .catch(() => {
            res.send({ message: "server error product." })
        })
}
 by retuning in midh to check it working in body ree nad req



<!-- frontnd code chnage to get id fromm frontend and pass in backend so go in editproduct.jsx and add one line 
            fromData.append('pid', p.productId)
this line add in handleapi const -->

now chnage in backend line code added ..


module.exports.editProduct = async (req, res) => {
    console.log(req.files)
    console.log(req.body)

    const pid = req.body.pid;
    const pname = req.body.pname;
    const pdesc = req.body.pdesc;
    const price = req.body.price;
    const category = req.body.category;
    const pimg = req.files?.pimg?.[0]?.path || '';
    const pimg2 = req.files?.pimg2?.[0]?.path || '';
    // const addedBy = req.body.userId;

    // const product = new Products({
    //     pname, pdesc, price, category, pimg, pimg2, addedBy, pLoc: {
    //         type: 'Point', coordinates: [plat, plog]
    //     }
    // })

    let editObj = {};

    if (pname) {
        editObj.pname = pname;
    }
    if (pdesc) {
        editObj.pdesc = pdesc;
    }
    if (price) {
        editObj.price = price;
    }
    if (category) {
        editObj.category = category;
    }   
    if (pimg) {
        editObj.pimg = pimg;
    }
    if (pimg2) {
        editObj.pimg2 = pimg2;
    }

    Products.updateOne({ _id: pid }, editObj , {new: true})
        .then((result) => {
            res.send({ message: "Edit success product." , product: result})
        })
        .catch(() => {
            res.send({ message: "server error product." })
        })
}
simpe if condition added okh to check iki that particular chnage only count not els get count na d commnet part not used becuase its for add new product n user id need to sma eit scannt b chnages okh 

























































["😂", "❤️", "🤣", "👍", "😭", "🙏", "😍", "🥰", "😊", "🤔", 
 "💕", "😘", "😅", "🤗", "🤩", "💖", "💯", "🎉", "🥺", "🤷‍♂️" 
 💻 🚀 🐛 🔧 📝 📦 ⚙️ 💾 🖥️ 📡 🔍 📜 ⏳ 🔥 🚦 🔑 🛠️ 📊 
 🔄 💣 ✅ ❌ 🎨 ⚡ 🏗️ 🌐 🏆 🛑 🤖 📡🔄 🏁 🏅 🖊️ 🔗  🛜 
 🎯 🎛️ 🧩 🔃 🏷️ 💡  🖥️ 🎭 📌 🧑‍💻 🛠️ 🌀 🔐 🏎️ 📁 🧪 🕵️‍♂️🌟 
 📜 🏗️ 🖱️ 🗂️ 🚀 🎛️ 🖋️ 📶 ⚒️ 🏴‍☠️ 🔍 🧬 🎚️ 🖧 💾 🗃️ ⚖️ 🕰️ ]